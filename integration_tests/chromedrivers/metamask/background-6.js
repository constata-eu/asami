LavaPack.loadBundle([[5744,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.verifyingPaymasterBytecode=r.verifyingPaymasterAbi=void 0;r.verifyingPaymasterAbi=[{inputs:[{internalType:"contract IEntryPoint",name:"_entryPoint",type:"address"},{internalType:"address",name:"_verifyingSigner",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{inputs:[{internalType:"uint32",name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"entryPoint",outputs:[{internalType:"contract IEntryPoint",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDeposit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct UserOperation",name:"userOp",type:"tuple"},{internalType:"uint48",name:"validUntil",type:"uint48"},{internalType:"uint48",name:"validAfter",type:"uint48"}],name:"getHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"paymasterAndData",type:"bytes"}],name:"parsePaymasterAndData",outputs:[{internalType:"uint48",name:"validUntil",type:"uint48"},{internalType:"uint48",name:"validAfter",type:"uint48"},{internalType:"bytes",name:"signature",type:"bytes"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"enum IPaymaster.PostOpMode",name:"mode",type:"uint8"},{internalType:"bytes",name:"context",type:"bytes"},{internalType:"uint256",name:"actualGasCost",type:"uint256"}],name:"postOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"senderNonce",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"sender",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"bytes",name:"initCode",type:"bytes"},{internalType:"bytes",name:"callData",type:"bytes"},{internalType:"uint256",name:"callGasLimit",type:"uint256"},{internalType:"uint256",name:"verificationGasLimit",type:"uint256"},{internalType:"uint256",name:"preVerificationGas",type:"uint256"},{internalType:"uint256",name:"maxFeePerGas",type:"uint256"},{internalType:"uint256",name:"maxPriorityFeePerGas",type:"uint256"},{internalType:"bytes",name:"paymasterAndData",type:"bytes"},{internalType:"bytes",name:"signature",type:"bytes"}],internalType:"struct UserOperation",name:"userOp",type:"tuple"},{internalType:"bytes32",name:"userOpHash",type:"bytes32"},{internalType:"uint256",name:"maxCost",type:"uint256"}],name:"validatePaymasterUserOp",outputs:[{internalType:"bytes",name:"context",type:"bytes"},{internalType:"uint256",name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"verifyingSigner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address payable",name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address payable",name:"withdrawAddress",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"}],r.verifyingPaymasterBytecode="0x60c0604052346200007b576200001f620000186200014f565b9062000176565b6040516114f96200026382396080518181816104ce015281816108f5015281816109d201528181610a4d01528181610adb01528181610b7901528181610bed0152610c8f015260a0518181816101f80152610ff601526114f990f35b600080fd5b634e487b7160e01b600052604160045260246000fd5b90601f01601f191681019081106001600160401b03821117620000b857604052565b62000080565b90620000d5620000cd60405190565b928362000096565b565b6001600160a01b031690565b90565b6001600160a01b0381165b036200007b57565b90505190620000d582620000e6565b6001600160a01b038116620000f1565b90505190620000d58262000108565b91906040838203126200007b57620000e390620001458185620000f9565b9360200162000118565b620001726200175c803803806200016681620000be565b92833981019062000127565b9091565b620001819062000186565b60a052565b6200019062000195565b608052565b620000d53362000200565b620000e390620000d7906001600160a01b031682565b620000e390620001a0565b620000e390620001b6565b90620001e0620000e3620001fc92620001c1565b82546001600160a01b0319166001600160a01b03919091161790565b9055565b6000546001600160a01b0316906200021a816000620001cc565b620002516200024a7f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e093620001c1565b91620001c1565b916200025c60405190565b600090a356fe6080604052600436101561001257600080fd5b60003560e01c80630396cb6014610102578063205c2878146100fd57806323d9ac9b146100f8578063715018a6146100f35780638da5cb5b146100ee57806394d4ad60146100e957806394e1fc19146100e4578063a9a23409146100df578063b0d691fe146100da578063bb9fe6bf146100d5578063c23a5cea146100d0578063c399ec88146100cb578063d0e30db0146100c6578063f2fde38b146100c15763f465c77e036101165761062f565b610565565b610552565b610537565b61051f565b6104f3565b6104b5565b61045d565b6103d6565b610337565b61024a565b610232565b6101e3565b6101bb565b610141565b63ffffffff81165b0361011657565b600080fd5b9050359061012882610107565b565b906020828203126101165761013e9161011b565b90565b61015461014f36600461012a565b610aa7565b604051005b0390f35b6001600160a01b031690565b6001600160a01b03811661010f565b9050359061012882610169565b8061010f565b9050359061012882610185565b91906040838203126101165761013e906101b28185610178565b9360200161018b565b34610116576101546101ce366004610198565b90610a2f565b600091031261011657565b9052565b34610116576101f33660046101d4565b6101597f00000000000000000000000000000000000000000000000000000000000000005b604051918291826001600160a01b03909116815260200190565b34610116576102423660046101d4565b610154610729565b346101165761025a3660046101d4565b610159610218610671565b909182601f830112156101165781359167ffffffffffffffff831161011657602001926001830284011161011657565b9060208282031261011657813567ffffffffffffffff8111610116576102bb9201610265565b9091565b90826000939282370152565b91906102e9816102e2816102f39560209181520190565b80956102bf565b601f01601f191690565b0190565b61032a61013e959394929461031b6060840196600085019065ffffffffffff169052565b65ffffffffffff166020830152565b60408185039101526102cb565b346101165761015961035361034d366004610295565b9061148b565b9061036094929460405190565b948594856102f7565b90816101609103126101165790565b65ffffffffffff811661010f565b9050359061012882610378565b909160608284031261011657813567ffffffffffffffff8111610116576103bf8461013e928501610369565b936103cd8160208601610386565b93604001610386565b34610116576101596103f26103ec366004610393565b91610dec565b6040519182918290815260200190565b6003111561011657565b9050359061012882610402565b906060828203126101165761042e818361040c565b92602083013567ffffffffffffffff8111610116576104528361013e928601610265565b93909460400161018b565b346101165761046d366004610419565b9291909161086a565b61013e9061015d906001600160a01b031682565b61013e90610476565b61013e9061048a565b6101df90610493565b602081019291610128919061049c565b34610116576104c53660046101d4565b604051806101597f0000000000000000000000000000000000000000000000000000000000000000826104a5565b34610116576105033660046101d4565b610154610bd1565b906020828203126101165761013e91610178565b346101165761015461053236600461050b565b610c33565b34610116576105473660046101d4565b6101596103f2610ad1565b61055d3660046101d4565b6101546108f0565b346101165761015461057836600461050b565b6107c5565b909160608284031261011657813567ffffffffffffffff8111610116576105a98461013e928501610369565b936105b7816020860161018b565b9360400161018b565b60005b8381106105d35750506000910152565b81810151838201526020016105c3565b6106046102e96020936102f3936105f8815190565b80835293849260200190565b958691016105c0565b9291602061062a61012893604087019087820360008901526105e3565b940152565b346101165761064861064236600461057d565b91610857565b9061015961065560405190565b9283928361060d565b61013e9061015d565b61013e905461065e565b61013e6000610667565b1561068257565b60405162461bcd60e51b8152806106cb600482016020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b0390fd5b6106f96106da610671565b6106f36106e63361015d565b916001600160a01b031690565b1461067b565b610128610717565b61015d61013e61013e9290565b61013e90610701565b610128610724600061070e565b6107fe565b6101286106cf565b610128906107406106da610671565b6107a0565b1561074c57565b60405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b6064820152608490fd5b610128906107246107b461015d600061070e565b6001600160a01b0383161415610745565b61012890610731565b906107de61013e6107fa92610493565b82546001600160a01b0319166001600160a01b03919091161790565b9055565b6108086000610667565b906108148160006107ce565b6108476108417f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e093610493565b91610493565b9161085160405190565b600090a3565b6102bb929190610865610c80565b610f93565b610872610c80565b60405162461bcd60e51b815260206004820152600d60248201526c6d757374206f7665727269646560981b6044820152606490fd5b634e487b7160e01b600052604160045260246000fd5b90601f01601f1916810190811067ffffffffffffffff8211176108df57604052565b6108a7565b6040513d6000823e3d90fd5b6109197f0000000000000000000000000000000000000000000000000000000000000000610493565b63b760faf990349061092a30610493565b90803b15610116576109526000936109699561094560405190565b9687958694859360e01b90565b83526001600160a01b031660048301526024820190565b03925af180156109925761097a5750565b61012890600061098a81836108bd565b8101906101d4565b6108e4565b90610128916109a76106da610671565b6109cd565b6001600160a01b0390911681526040810192916101289160200152565b0152565b6109f67f0000000000000000000000000000000000000000000000000000000000000000610493565b9063205c287891803b1561011657610a2460008094610969610a1760405190565b9788968795869460e01b90565b8452600484016109ac565b9061012891610997565b61012890610a486106da610671565b610a717f0000000000000000000000000000000000000000000000000000000000000000610493565b630396cb60913491803b1561011657610a936000936109699561094560405190565b835263ffffffff1660048301526024820190565b61012890610a39565b9050519061012882610185565b906020828203126101165761013e91610ab0565b610b286020610aff7f0000000000000000000000000000000000000000000000000000000000000000610493565b6370a0823190610952610b1130610493565b92610b1b60405190565b9586948593849360e01b90565b03915afa90811561099257600091610b3e575090565b61013e915060203d8111610b5f575b610b5781836108bd565b810190610abd565b503d610b4d565b610b716106da610671565b610128610b9d7f0000000000000000000000000000000000000000000000000000000000000000610493565b63bb9fe6bf90803b1561011657610bc391600091610bba60405190565b93849260e01b90565b825281838160048101610969565b610128610b66565b61012890610be86106da610671565b610c117f0000000000000000000000000000000000000000000000000000000000000000610493565b9063c23a5cea90823b1561011657610969926109526000809461094560405190565b61012890610bd9565b15610c4357565b60405162461bcd60e51b815260206004820152601560248201527414d95b99195c881b9bdd08115b9d1c9e541bda5b9d605a1b6044820152606490fd5b61012833610cb36106e661015d7f0000000000000000000000000000000000000000000000000000000000000000610493565b14610c3c565b3561013e81610185565b903590601e193682900301821215610116570180359067ffffffffffffffff8211610116576020019136829003831361011657565b90610128610d0560405190565b92836108bd565b67ffffffffffffffff81116108df57602090601f01601f19160190565b90929192610d3e610d3982610d0c565b610cf8565b9381855260208501908284011161011657610128926102bf565b61013e913691610d29565b9a98969492909d9c9b99979593916101a08c019e60008d01610d8c916001600160a01b03169052565b60208c015260408b015260608a0152608089015260a088015260c087015260e08601526101008501526101208401526001600160a01b031661014083015265ffffffffffff16610160820152610180016101289165ffffffffffff169052565b91610df683610ec7565b610e0260208501610cb9565b91610e106040860186610cc3565b610e1991610d58565b8051906020012093610e2e6060870187610cc3565b610e3791610d58565b8051906020012095610e4b60808201610cb9565b90610e5860a08201610cb9565b90610e6560c08201610cb9565b90610e7260e08201610cb9565b9061010001610e8090610cb9565b91469330610e8d90610493565b95610e9760405190565b9c8d9c60208e019c610ea99c8e610d63565b908103825203610eb990826108bd565b8051906020012090565b2090565b610edd61013e91610ed6600090565b503561048a565b61048a565b61013e61013e61013e9290565b602080825261013e91016040808252906020017f566572696679696e675061796d61737465723a20696e76616c6964207369676e81527f6174757265206c656e67746820696e207061796d6173746572416e644461746160208201520190565b15610f5657565b60405162461bcd60e51b8152806106cb60048201610eef565b90610f7c610d3983610d0c565b918252565b61013e6000610f6f565b61013e610f81565b610ff39250610fee91506110216106e661015d61101b610fba61034d610120870187610cc3565b939299918a8299610fe9610fcf88859e965090565b610fd96040610ee2565b8114908115611049575b50610f4f565b610dec565b61135d565b917f000000000000000000000000000000000000000000000000000000000000000096610d58565b9061105f565b0361103e576110319160006113d5565b9061103a610f8b565b9190565b6110319160016113d5565b905061105861103a6041610ee2565b1438610fe3565b815161106e61103a6041610ee2565b036110915761013e91906020820151906060604084015193015160001a90611262565b8151916040926110a361103a85610ee2565b036110ba5761013e926020820151910151916110ff565b60405162461bcd60e51b815260206004820152601f60248201527f45434453413a20696e76616c6964207369676e6174757265206c656e677468006044820152606490fd5b61013e9291906001600160ff1b0383169260ff1c601b0190611262565b61013e90610ee2565b1561112c57565b60405162461bcd60e51b815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202773272076616c604482015261756560f01b6064820152608490fd5b61118961013e61013e9290565b60ff1690565b1561119657565b60405162461bcd60e51b815260206004820152602260248201527f45434453413a20696e76616c6964207369676e6174757265202776272076616c604482015261756560f01b6064820152608490fd5b6109c96101289461120f606094989795611205608086019a6000870152565b60ff166020850152565b6040830152565b1561121d57565b60405162461bcd60e51b815260206004820152601860248201527f45434453413a20696e76616c6964207369676e617475726500000000000000006044820152606490fd5b6112de602094600094611273600090565b506112b36112808361111c565b6112ac61103a7f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0610ee2565b1115611125565b6112bd601b61117c565b60ff8616148015611310575b6112d29061118f565b604051948594856111e6565b838052039060015afa156109925760005161013e6112ff61015d600061070e565b6001600160a01b0383161415611216565b506112d261131e601c61117c565b60ff87161490506112c9565b906102f3610f7c6020937f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c0190565b61138561136960405190565b809261137960208301918261132a565b908103825203826108bd565b610ec3611390825190565b9160200190565b61013e61013e61013e9265ffffffffffff1690565b61013e906113c061103a61013e9460ff1690565b901b90565b61013e61013e61013e9260ff1690565b6114269161141c916000901561142a575061141561140f6113ff6113f9600161117c565b93611397565b61140960a061117c565b906113ac565b916113c5565b1792611397565b61140960d061117c565b1790565b61140f6113ff6113f96114159361117c565b61013e6014610ee2565b61013e6054610ee2565b90939293848311610116578411610116578101920390565b91906040838203126101165761013e906114828185610386565b93602001610386565b916102bb808361149961143c565b6114bb6114b36102bb6114aa611446565b8094868c611450565b810190611468565b96909761145056fea26469706673582212208899fb33dd8c69445c982f410a39c7677f7257ec7ab219d04e93a9f633a42ddb64736f6c63430008140033"}}},{package:"$root$",file:"test/e2e/seeder/contracts/verifyingPaymaster.ts"}],[5745,{"./contracts/entrypoint":5742,"./contracts/simpleAccountFactory":5743,"./contracts/verifyingPaymaster":5744,"@metamask/test-dapp/dist/constants.json":2810},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){const{hstBytecode:n,hstAbi:i,piggybankBytecode:s,piggybankAbi:a,nftsAbi:o,nftsBytecode:c,erc1155Abi:u,erc1155Bytecode:d,failingContractAbi:h,failingContractBytecode:l,multisigAbi:f,multisigBytecode:p}=e("@metamask/test-dapp/dist/constants.json"),{entrypointAbi:g,entrypointBytecode:y}=e("./contracts/entrypoint"),{simpleAccountFactoryAbi:m,simpleAccountFactoryBytecode:b}=e("./contracts/simpleAccountFactory"),{verifyingPaymasterAbi:v,verifyingPaymasterBytecode:w}=e("./contracts/verifyingPaymaster"),k={HST:"hst",NFTS:"nfts",ERC1155:"erc1155",PIGGYBANK:"piggybank",FAILING:"failing",MULTISIG:"multisig",ENTRYPOINT:"entrypoint",SIMPLE_ACCOUNT_FACTORY:"simpleAccountFactory",VERIFYING_PAYMASTER:"verifyingPaymaster"},T={[k.HST]:{initialAmount:10,tokenName:"TST",decimalUnits:4,tokenSymbol:"TST",bytecode:n,abi:i},[k.NFTS]:{bytecode:c,abi:o},[k.ERC1155]:{bytecode:d,abi:u},[k.PIGGYBANK]:{bytecode:s,abi:a},[k.FAILING]:{bytecode:l,abi:h},[k.MULTISIG]:{bytecode:p,abi:f},[k.ENTRYPOINT]:{bytecode:y,abi:g},[k.SIMPLE_ACCOUNT_FACTORY]:{abi:m,bytecode:b},[k.VERIFYING_PAYMASTER]:{abi:v,bytecode:w}};t.exports={SMART_CONTRACTS:k,contractConfiguration:T}}}},{package:"$root$",file:"test/e2e/seeder/smart-contracts.js"}],[5746,{"./keyring-utils":5747,"@ethereumjs/tx":434,"@metamask/eth-sig-util":1589,"@metamask/utils":2874,buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.KNOWN_PUBLIC_KEY_ADDRESSES=r.KNOWN_PUBLIC_KEY=r.KNOWN_PRIVATE_KEYS=r.FakeTrezorBridge=r.FakeLedgerBridge=r.FakeKeyringBridge=r.CHAIN_CODE=void 0;var n=e("@ethereumjs/tx"),i=e("@metamask/eth-sig-util"),s=e("@metamask/utils"),a=e("./keyring-utils");function o(e,t,r){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function c(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const u=r.KNOWN_PUBLIC_KEY="03752603a8131fd03fe726434e82a181c3a6bc227a44660ab774a482d29d1172c3",d=r.CHAIN_CODE="2b73df9ce5df820c728c8f77d51a72ec578e25c6a3c5e32b65fd43d2b4fb0e63",h=r.KNOWN_PUBLIC_KEY_ADDRESSES=[{address:"0xF68464152d7289D7eA9a2bEC2E0035c45188223c",balance:null,index:0},{address:"0x9EE70472c9D1B1679A33f2f0549Ab5BFFCE118eF",balance:null,index:1},{address:"0x3185aC9266D3DF3D95dC847e2B88b52F12A34C21",balance:null,index:2},{address:"0x49EED7a86c1C404e2666Ac12BF00Af63804AC78d",balance:null,index:3},{address:"0x1d374341feBd02C2F30929d2B4a767676799E1f2",balance:null,index:4}],l=r.KNOWN_PRIVATE_KEYS=["d41051826c32a548e55aa3e0dee93e96425b0f355df1e06d1595ed69385f8dc3","780f45733fe48f03ab993b071a11e77147ca959d417e048c7da5ac06b8283e51","daf3144f471e0531e5efd6e81b4907a4154fec5fdb53cf4f94c4b4195e6473fb","841f90906439526b3771c0aa51f93f6aae5c5ee0fdc73d0d8ff7f8a9b28754d7","7df6c85f059939631c05e72b6fc3c54423754a5162ae4a69b14b38219c430665"];var f=new WeakMap;class p{constructor({publicKeyPayload:e}){var t,r,n;o(this,f,void 0),r=this,n=e,(t=f).set(c(t,r),n)}async init(){return Promise.resolve()}async getPublicKey(){return t=this,(e=f).get(c(e,t));var e,t}}r.FakeKeyringBridge=p;r.FakeTrezorBridge=class extends p{constructor(){super({publicKeyPayload:{success:!0,payload:{publicKey:u,chainCode:d,address:h[0].address}}})}async dispose(){return Promise.resolve()}async ethereumSignTransaction({transaction:e}){const r=a.Common.custom({chain:{name:"localhost",chainId:e.chainId,networkId:e.chainId},chainId:e.chainId,hardfork:"istanbul"}),i=n.TransactionFactory.fromTxData(e,{common:r}).sign(t.from(l[0],"hex"));return{id:1,success:!0,payload:{v:(0,s.bigIntToHex)(i.v),r:(0,s.bigIntToHex)(i.r),s:(0,s.bigIntToHex)(i.s),serializedTx:(0,s.bytesToHex)(i.serialize())}}}async ethereumSignTypedData(e){const t={types:e.data.types,domain:e.data.domain,primaryType:e.data.primaryType,message:e.data.message},r=(0,i.signTypedData)({privateKey:l[0],data:t,version:i.SignTypedDataVersion.V4});return{id:1,success:!0,payload:{address:h[0].address,signature:r}}}};r.FakeLedgerBridge=class extends p{constructor(){super({publicKeyPayload:{publicKey:u,chainCode:"0x1"}})}async destroy(){return Promise.resolve()}updateTransportMethod(){return!0}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"test/stub/keyring-bridge.js"}],[5747,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Common=void 0,r.addHexPrefix=function(e){if(e.startsWith("0x"))return e;return`0x${e}`};class n{constructor({chain:e,hardfork:t}){this.chain=e,this.hardfork=t,this.customCrypto={}}static custom({chain:e,chainId:t,networkId:r},i={}){return new n({chain:{name:e.name||"custom-chain",chainId:t||e.chainId,networkId:r||e.networkId},hardfork:i.hardfork||"istanbul"})}copy(){return new n({chain:this.chain,hardfork:this.hardfork})}gteHardfork(){return!0}chainId(){return BigInt(this.chain.chainId)}}r.Common=n}}},{package:"$root$",file:"test/stub/keyring-utils.js"}],[5748,{"../../shared/constants/network":5658,"@metamask/keyring-api":1873,"@metamask/network-controller":2105,uuid:5587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.mockNetworkStateOld=r.mockNetworkState=r.mockMultichainNetworkState=void 0;var n=e("@metamask/network-controller"),i=e("uuid"),s=e("@metamask/keyring-api"),a=e("../../shared/constants/network");r.mockNetworkStateOld=(...e)=>{const t=e.map((e=>({id:e.id??(0,i.v4)(),chainId:e.chainId,rpcUrl:"rpcUrl"in e?e.rpcUrl:`https://localhost/rpc/${e.chainId}`,nickname:"nickname"in e?e.nickname:a.NETWORK_TO_NAME_MAP[e.chainId],ticker:"ticker"in e?e.ticker:a.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[e.chainId],...(!("blockExplorerUrl"in e)||e.blockExplorerUrl)&&{rpcPrefs:{blockExplorerUrl:e.blockExplorerUrl??`https://localhost/blockExplorer/${e.chainId}`}}}))),r=e.reduce(((e,r,i)=>({...e,[t[i].id]:r.metadata??{EIPS:{},status:n.NetworkStatus.Available}})),{});return{selectedNetworkClientId:t[0].id,networkConfigurations:t.reduce(((e,t)=>({...e,[t.id]:t})),{}),networksMetadata:r}};r.mockMultichainNetworkState=()=>({multichainNetworkConfigurationsByChainId:{[s.BtcScope.Mainnet]:{chainId:s.BtcScope.Mainnet,name:"Bitcoin Mainnet",nativeCurrency:`${s.BtcScope.Mainnet}/slip44:0`,isEvm:!1},[s.SolScope.Mainnet]:{chainId:s.SolScope.Mainnet,name:"Solana Mainnet",nativeCurrency:`${s.SolScope.Mainnet}/slip44:501`,isEvm:!1}},selectedMultichainNetworkChainId:s.BtcScope.Mainnet,isEvmSelected:!0});r.mockNetworkState=(...e)=>{if(new Set(e.map((e=>e.chainId))).size!==e.length)throw"mockNetworkState doesnt currently support multiple rpc urls per chain id";const t=e.map((e=>{const t=!("blockExplorerUrl"in e)||e.blockExplorerUrl?e.blockExplorerUrl??`https://localhost/blockExplorer/${e.chainId}`:undefined,r="rpcUrl"in e?e.rpcUrl:`https://localhost/rpc/${e.chainId}`;return{chainId:e.chainId,blockExplorerUrls:t?[t]:[],defaultBlockExplorerUrlIndex:t?0:undefined,rpcEndpoints:[{networkClientId:e.id??(0,i.v4)(),type:n.RpcEndpointType.Custom,url:r}],defaultRpcEndpointIndex:0,name:"nickname"in e?e.nickname:a.NETWORK_TO_NAME_MAP[e.chainId],nativeCurrency:"ticker"in e?e.ticker:a.CHAIN_ID_TO_CURRENCY_SYMBOL_MAP[e.chainId]}})),r=e.reduce(((e,r,i)=>({...e,[t[i].rpcEndpoints[0].networkClientId]:r.metadata??{EIPS:{},status:n.NetworkStatus.Available}})),{});return{selectedNetworkClientId:t[0].rpcEndpoints[0].networkClientId,networkConfigurationsByChainId:t.reduce(((e,t)=>({...e,[t.chainId]:t})),{}),networksMetadata:r}}}}},{package:"$root$",file:"test/stub/networks.ts"}],[58,{"../../../../shared/constants/bridge":5644,"../../../../shared/constants/multichain/networks":5657,"../../../../shared/constants/network":5658,"../../../../shared/modules/bridge-utils/balance":5701,"../../../../shared/modules/bridge-utils/bridge.util":5702,"../../../../shared/modules/bridge-utils/caip-formatters":5703,"../../../../shared/modules/bridge-utils/quote":5704,"../../../../shared/modules/conversion.utils":5710,"../../../../shared/types/bridge":5735,"./constants":59,"@ethersproject/bignumber":490,"@ethersproject/contracts":499,"@ethersproject/providers":537,"@metamask/metamask-eth-abis":2018,"@metamask/polling-controller":2340,"@metamask/snaps-utils":2777,"@metamask/utils":2874},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=e("@metamask/utils"),i=e("@metamask/polling-controller"),s=e("@ethersproject/contracts"),a=e("@metamask/metamask-eth-abis"),o=e("@ethersproject/providers"),c=e("@ethersproject/bignumber"),u=e("@metamask/snaps-utils"),d=e("../../../../shared/modules/bridge-utils/bridge.util"),h=e("../../../../shared/modules/conversion.utils"),l=e("../../../../shared/types/bridge"),f=e("../../../../shared/modules/bridge-utils/quote"),p=e("../../../../shared/modules/bridge-utils/balance"),g=e("../../../../shared/constants/network"),y=e("../../../../shared/constants/bridge"),m=e("../../../../shared/modules/bridge-utils/caip-formatters"),b=e("../../../../shared/constants/multichain/networks"),v=e("./constants");function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t,r){T(e,t),t.set(e,r)}function T(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(e,t){return e.get(E(e,t))}function _(e,t,r){return e.set(E(e,t),r),r}function E(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const C={bridgeState:{persist:!1,anonymous:!1}},S="Reset controller state";var A=new WeakMap,D=new WeakMap,M=new WeakMap,P=new WeakMap,O=new WeakMap,R=new WeakMap,x=new WeakMap,B=new WeakMap,N=new WeakSet;class j extends((0,i.StaticIntervalPollingController)()){constructor({messenger:e,getLayer1GasFee:t}){var r,i;super({name:v.BRIDGE_CONTROLLER_NAME,metadata:C,messenger:e,state:{bridgeState:{...v.DEFAULT_BRIDGE_STATE}}}),T(r=this,i=N),i.add(r),k(this,A,void 0),k(this,D,void 0),k(this,M,void 0),w(this,"_executePoll",(async e=>{await I(R,this).call(this,e)})),w(this,"updateBridgeQuoteRequestParams",(async e=>{var t;this.stopAllPolling(),null===(t=I(A,this))||void 0===t||t.abort("Quote request updated");const{bridgeState:r}=this.state,n={...v.DEFAULT_BRIDGE_STATE.quoteRequest,...e};if(this.update((e=>{e.bridgeState={...r,quoteRequest:n,quotes:v.DEFAULT_BRIDGE_STATE.quotes,quotesLastFetched:v.DEFAULT_BRIDGE_STATE.quotesLastFetched,quotesLoadingStatus:v.DEFAULT_BRIDGE_STATE.quotesLoadingStatus,quoteFetchError:v.DEFAULT_BRIDGE_STATE.quoteFetchError,quotesRefreshCount:v.DEFAULT_BRIDGE_STATE.quotesRefreshCount,quotesInitialLoadTime:v.DEFAULT_BRIDGE_STATE.quotesInitialLoadTime}})),(0,f.isValidQuoteRequest)(n)){_(D,this,Date.now());const t=n.srcChainId.toString();let r;r=t===b.MultichainNetworks.SOLANA?e.insufficientBal:e.insufficientBal||!await I(P,this).call(this,n),I(O,this).call(this),this.startPolling({networkClientId:t,updatedQuoteRequest:{...n,insufficientBal:r}})}})),k(this,P,(async e=>{var t,r;const n=null===(t=E(N,this,K).call(this))||void 0===t?void 0:t.address,i=(0,m.formatChainIdToHex)(e.srcChainId),s=null===(r=E(N,this,L).call(this))||void 0===r?void 0:r.provider,a=(0,m.formatAddressToString)(e.srcTokenAddress);return s&&n&&a&&e.srcTokenAmount&&i&&await(0,p.hasSufficientBalance)(s,n,a,e.srcTokenAmount,i)})),w(this,"resetState",(()=>{var e;this.stopAllPolling(),null===(e=I(A,this))||void 0===e||e.abort(S),this.update((e=>{e.bridgeState={...v.DEFAULT_BRIDGE_STATE,quotes:[],bridgeFeatureFlags:e.bridgeState.bridgeFeatureFlags}}))})),w(this,"setBridgeFeatureFlags",(async()=>{const{bridgeState:e}=this.state,t=await(0,d.fetchBridgeFeatureFlags)();this.update((r=>{r.bridgeState={...e,bridgeFeatureFlags:t}})),I(O,this).call(this)})),k(this,O,(()=>{var e;const{bridgeState:t}=this.state,{srcChainId:r}=t.quoteRequest,n=r?null===(e=t.bridgeFeatureFlags[l.BridgeFeatureFlagsKey.EXTENSION_CONFIG].chains[(0,m.formatChainIdToCaip)(r)])||void 0===e?void 0:e.refreshRate:undefined,i=t.bridgeFeatureFlags[l.BridgeFeatureFlagsKey.EXTENSION_CONFIG].refreshRate;this.setIntervalLength(n??i)})),k(this,R,(async({networkClientId:e,updatedQuoteRequest:t})=>{var r;null===(r=I(A,this))||void 0===r||r.abort("New quote request"),_(A,this,new AbortController);const{bridgeState:n}=this.state;this.update((e=>{e.bridgeState={...n,quotesLoadingStatus:l.RequestStatus.LOADING,quoteRequest:t,quoteFetchError:v.DEFAULT_BRIDGE_STATE.quoteFetchError}}));try{const e=await(0,d.fetchBridgeQuotes)(t,I(A,this).signal),r=await I(x,this).call(this,e),n=await I(B,this).call(this,e);this.update((t=>{t.bridgeState={...t.bridgeState,quotes:r??n??e,quotesLoadingStatus:l.RequestStatus.FETCHED}}))}catch(e){const t="AbortError"===e.name;if(e===S||t)return;this.update((t=>{t.bridgeState={...n,quotes:v.DEFAULT_BRIDGE_STATE.quotes,quoteFetchError:e instanceof Error?e.message:"Unknown error",quotesLoadingStatus:l.RequestStatus.ERROR}})),console.log("Failed to fetch bridge quotes",e)}finally{const{maxRefreshCount:e}=n.bridgeFeatureFlags[l.BridgeFeatureFlagsKey.EXTENSION_CONFIG],r=n.quotesRefreshCount+1;(t.insufficientBal||!t.insufficientBal&&r>=e)&&this.stopAllPolling();const i=Date.now();this.update((e=>{e.bridgeState={...e.bridgeState,quotesInitialLoadTime:1===r&&I(D,this)?i-I(D,this):n.quotesInitialLoadTime,quotesLastFetched:i,quotesRefreshCount:r}}))}})),k(this,x,(async e=>e.some((({quote:e})=>{const t=(0,m.formatChainIdToCaip)(e.srcChainId);return![g.CHAIN_IDS.OPTIMISM,g.CHAIN_IDS.BASE].map(m.formatChainIdToCaip).includes(t)}))?undefined:await Promise.all(e.map((async e=>{const{quote:t,trade:r,approval:i}=e,s=(0,n.add0x)((0,h.decimalToHex)(t.srcChainId)),a=e=>{var t;return{from:e.from,to:e.to,value:e.value,data:e.data,gasLimit:null===(t=e.gasLimit)||void 0===t?void 0:t.toString()}},o=i?await I(M,this).call(this,{transactionParams:a(i),chainId:s}):"0",c=await I(M,this).call(this,{transactionParams:a(r),chainId:s});return{...e,l1GasFeesInHexWei:(0,h.sumHexes)(o,c)}}))))),k(this,B,(async e=>e.some((({quote:e})=>(0,m.formatChainIdToCaip)(e.srcChainId)!==b.MultichainNetworks.SOLANA))?undefined:await Promise.all(e.map((async e=>{var t;const{trade:r}=e,n=E(N,this,K).call(this);if(null!=n&&null!==(t=n.metadata)&&void 0!==t&&null!==(t=t.snap)&&void 0!==t&&t.id&&"string"==typeof r){const{value:t}=await this.messagingSystem.call("SnapController:handleRequest",{snapId:n.metadata.snap.id,origin:"metamask",handler:u.HandlerType.OnRpcRequest,request:{method:"getFeeForTransaction",params:{transaction:r,scope:n.options.scope}}});return{...e,solanaFeesInLamports:t}}return e}))))),w(this,"getBridgeERC20Allowance",(async(e,t)=>{var r;const n=null===(r=E(N,this,L).call(this))||void 0===r?void 0:r.provider;if(!n)throw new Error("No provider found");const i=new o.Web3Provider(n),u=new s.Contract(e,a.abiERC20,i),{address:d}=E(N,this,K).call(this)??{},h=await u.allowance(d,v.METABRIDGE_CHAIN_TO_ADDRESS_MAP[t]);return c.BigNumber.from(h).toString()})),this.setIntervalLength(y.REFRESH_INTERVAL_MS),_(A,this,new AbortController),this.messagingSystem.registerActionHandler(`${v.BRIDGE_CONTROLLER_NAME}:setBridgeFeatureFlags`,this.setBridgeFeatureFlags.bind(this)),this.messagingSystem.registerActionHandler(`${v.BRIDGE_CONTROLLER_NAME}:updateBridgeQuoteRequestParams`,this.updateBridgeQuoteRequestParams.bind(this)),this.messagingSystem.registerActionHandler(`${v.BRIDGE_CONTROLLER_NAME}:resetState`,this.resetState.bind(this)),this.messagingSystem.registerActionHandler(`${v.BRIDGE_CONTROLLER_NAME}:getBridgeERC20Allowance`,this.getBridgeERC20Allowance.bind(this)),_(M,this,t)}}function K(){return this.messagingSystem.call("AccountsController:getSelectedMultichainAccount")}function L(){return this.messagingSystem.call("NetworkController:getSelectedNetworkClient")}r.default=j}}},{package:"$root$",file:"app/scripts/controllers/bridge/bridge-controller.ts"}],[588,{"@firebase/component":589,"@firebase/logger":591,"@firebase/util":594,idb:4566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"FirebaseError",{enumerable:!0,get:function(){return s.FirebaseError}}),r._DEFAULT_ENTRY_NAME=r.SDK_VERSION=void 0,r._addComponent=y,r._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},r._apps=void 0,r._clearComponents=function(){g.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r._components=void 0,r._getProvider=b,r._isFirebaseApp=v,r._isFirebaseServerApp=function(e){return e.settings!==undefined},r._registerComponent=m,r._removeServiceInstance=function(e,t,r=h){b(e,t).clearInstance(r)},r._serverApps=void 0,r.deleteApp=E,r.getApp=function(e=h){const t=f.get(e);if(!t&&e===h&&(0,s.getDefaultAppConfig)())return _();if(!t)throw k.create("no-app",{appName:e});return t},r.getApps=function(){return Array.from(f.values())},r.initializeApp=_,r.initializeServerApp=function(e,t){if((0,s.isBrowser)()&&!(0,s.isWebWorker)())throw k.create("invalid-server-app-environment");t.automaticDataCollectionEnabled===undefined&&(t.automaticDataCollectionEnabled=!1);let r;r=v(e)?e.options:e;const i=Object.assign(Object.assign({},t),r);i.releaseOnDeref!==undefined&&delete i.releaseOnDeref;if(t.releaseOnDeref!==undefined&&"undefined"==typeof FinalizationRegistry)throw k.create("finalization-registry-not-supported",{});const a=""+(c=JSON.stringify(i),[...c].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0)),o=p.get(a);var c;if(o)return o.incRefCount(t.releaseOnDeref),o;const u=new n.ComponentContainer(a);for(const e of g.values())u.addComponent(e);const d=new I(r,t,a,u);return p.set(a,d),d},r.onLog=function(e,t){if(null!==e&&"function"!=typeof e)throw k.create("invalid-log-argument");(0,i.setUserLogHandler)(e,t)},r.registerVersion=C,r.setLogLevel=function(e){(0,i.setLogLevel)(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;var n=e("@firebase/component"),i=e("@firebase/logger"),s=e("@firebase/util"),a=e("idb");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const c="@firebase/app",u="0.10.18",d=new i.Logger("@firebase/app"),h=r._DEFAULT_ENTRY_NAME="[DEFAULT]",l={[c]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},f=r._apps=new Map,p=r._serverApps=new Map,g=r._components=new Map;function y(e,t){try{e.container.addComponent(t)}catch(r){d.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function m(e){const t=e.name;if(g.has(t))return d.debug(`There were multiple attempts to register component ${t}.`),!1;g.set(t,e);for(const t of f.values())y(t,e);for(const t of p.values())y(t,e);return!0}function b(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function v(e){return e.options!==undefined}const w={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},k=new s.ErrorFactory("app","Firebase",w);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class T{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new n.Component("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw k.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I extends T{constructor(e,t,r,n){const i=t.automaticDataCollectionEnabled!==undefined&&t.automaticDataCollectionEnabled,s={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==undefined)super(e,s,n);else{super(e.options,s,n)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:i},t),this._finalizationRegistry=null,"undefined"!=typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()}))),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=undefined,t.releaseOnDeref=undefined,C(c,u,"serverapp")}toJSON(){return undefined}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==undefined&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){E(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw k.create("server-app-deleted")}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.SDK_VERSION="11.2.0";function _(e,t={}){let r=e;if("object"!=typeof t){t={name:t}}const i=Object.assign({name:h,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!=typeof a||!a)throw k.create("bad-app-name",{appName:String(a)});if(r||(r=(0,s.getDefaultAppConfig)()),!r)throw k.create("no-options");const o=f.get(a);if(o){if((0,s.deepEqual)(r,o.options)&&(0,s.deepEqual)(i,o.config))return o;throw k.create("duplicate-app",{appName:a})}const c=new n.ComponentContainer(a);for(const e of g.values())c.addComponent(e);const u=new T(r,i,c);return f.set(a,u),u}async function E(e){let t=!1;const r=e.name;if(f.has(r))t=!0,f.delete(r);else if(p.has(r)){e.decRefCount()<=0&&(p.delete(r),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function C(e,t,r){var i;let s=null!==(i=l[e])&&void 0!==i?i:e;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=[`Unable to register library "${s}" with version "${t}":`];return a&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void d.warn(e.join(" "))}m(new n.Component(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const S="firebase-heartbeat-database",A=1,D="firebase-heartbeat-store";let M=null;function P(){return M||(M=(0,a.openDB)(S,A,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(D)}catch(e){console.warn(e)}}}).catch((e=>{throw k.create("idb-open",{originalErrorMessage:e.message})}))),M}async function O(e,t){try{const r=(await P()).transaction(D,"readwrite"),n=r.objectStore(D);await n.put(t,R(e)),await r.done}catch(e){if(e instanceof s.FirebaseError)d.warn(e.message);else{const t=k.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});d.warn(t.message)}}}function R(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new N(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),n=B();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return;return this._heartbeatsCache.heartbeats.push({date:n,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}catch(e){d.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=B(),{heartbeatsToSend:r,unsentEntries:n}=function(e,t=1024){const r=[];let n=e.slice();for(const i of e){const e=r.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),j(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),j(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),i=(0,s.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return d.warn(e),""}}}function B(){return(new Date).toISOString().substring(0,10)}class N{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.isIndexedDBAvailable)()&&(0,s.validateIndexedDBOpenable)().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await P()).transaction(D),r=await t.objectStore(D).get(R(e));return await t.done,r}catch(e){if(e instanceof s.FirebaseError)d.warn(e.message);else{const t=k.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});d.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return O(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return O(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function j(e){return(0,s.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K;K="",m(new n.Component("platform-logger",(e=>new o(e)),"PRIVATE")),m(new n.Component("heartbeat",(e=>new x(e)),"PRIVATE")),C(c,u,K),C(c,u,"esm2017"),C("fire-js","")}}},{package:"@metamask/notification-services-controller>firebase>@firebase/app",file:"node_modules/@firebase/app/dist/esm/index.esm2017.js"}],[589,{"@firebase/util":594},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Provider=r.ComponentContainer=r.Component=void 0;var n=e("@firebase/util");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.Component=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};const i="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new n.Deferred;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(n)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=i){return this.instances.has(e)}getOptions(e=i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[e,t]of this.instancesDeferred.entries()){r===this.normalizeInstanceIdentifier(e)&&t.resolve(n)}return n}onInit(e,t){var r;const n=this.normalizeInstanceIdentifier(t),i=null!==(r=this.onInitCallbacks.get(n))&&void 0!==r?r:new Set;i.add(e),this.onInitCallbacks.set(n,i);const s=this.instances.get(n);return s&&e(s,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===i?undefined:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}var n;return r||null}normalizeInstanceIdentifier(e=i){return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}r.Provider=s;r.ComponentContainer=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}}}},{package:"@metamask/notification-services-controller>firebase>@firebase/app>@firebase/component",file:"node_modules/@firebase/component/dist/esm/index.esm2017.js"}],[59,{"../../../../shared/constants/bridge":5644,"../../../../shared/constants/network":5658,"../../../../shared/types/bridge":5735,"ethereumjs-util":4251},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.METABRIDGE_CHAIN_TO_ADDRESS_MAP=r.DEFAULT_BRIDGE_STATE=r.DEFAULT_BRIDGE_CONTROLLER_STATE=r.BRIDGE_CONTROLLER_NAME=void 0;var n=e("ethereumjs-util"),i=e("../../../../shared/constants/bridge"),s=e("../../../../shared/constants/network"),a=e("../../../../shared/types/bridge");r.BRIDGE_CONTROLLER_NAME="BridgeController";const o=r.DEFAULT_BRIDGE_STATE={bridgeFeatureFlags:{[a.BridgeFeatureFlagsKey.EXTENSION_CONFIG]:{refreshRate:i.REFRESH_INTERVAL_MS,maxRefreshCount:i.DEFAULT_MAX_REFRESH_COUNT,support:!1,chains:{}}},quoteRequest:{walletAddress:undefined,srcTokenAddress:(0,n.zeroAddress)()},quotesInitialLoadTime:undefined,quotes:[],quotesLastFetched:undefined,quotesLoadingStatus:undefined,quoteFetchError:undefined,quotesRefreshCount:0};r.DEFAULT_BRIDGE_CONTROLLER_STATE={bridgeState:{...o}},r.METABRIDGE_CHAIN_TO_ADDRESS_MAP={[s.CHAIN_IDS.MAINNET]:i.METABRIDGE_ETHEREUM_ADDRESS}}}},{package:"$root$",file:"app/scripts/controllers/bridge/constants.ts"}],[590,{"@firebase/app":588,"@firebase/component":589,"@firebase/util":594,idb:4566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.deleteInstallations=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e){const{appConfig:t}=e,r=await F(t,(e=>e&&0===e.registrationStatus?undefined:e));if(r){if(1===r.registrationStatus)throw g.create("delete-pending-registration");if(2===r.registrationStatus){if(!navigator.onLine)throw g.create("app-offline");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
await async function(e,t){const r=function(e,{fid:t}){return`${m(e)}/${t}`}(e,t),n=k(e,t),i={method:"DELETE",headers:n},s=await T((()=>fetch(r,i)));if(!s.ok)throw await v("Delete Installation",s)}(t,r),await q(t)}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.getId=Q,r.getInstallations=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e=(0,n.getApp)()){return(0,n._getProvider)(e,"installations").getImmediate()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.getToken=J,r.onIdChange=function(e,t){const{appConfig:r}=e;return function(e,t){O();const r=S(e);let n=A.get(r);n||(n=new Set,A.set(r,n));n.add(t)}(r,t),()=>{!function(e,t){const r=S(e),n=A.get(r);if(!n)return;n.delete(t),0===n.size&&A.delete(r);R()}(r,t)}};var n=e("@firebase/app"),i=e("@firebase/component"),s=e("@firebase/util"),a=e("idb");const o="@firebase/installations",c="0.6.12",u=1e4,d=`w:${c}`,h="FIS_v2",l="https://firebaseinstallations.googleapis.com/v1",f=36e5,p={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},g=new s.ErrorFactory("installations","Installations",p);function y(e){return e instanceof s.FirebaseError&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m({projectId:e}){return`${l}/projects/${e}/installations`}function b(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function v(e,t){const r=(await t.json()).error;return g.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function w({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function k(e,{refreshToken:t}){const r=w(e);return r.append("Authorization",function(e){return`${h} ${e}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)),r}async function T(e){const t=await e();return t.status>=500&&t.status<600?e():t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function I(e){return new Promise((t=>{setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const _=/^[cdef][\w-]{21}$/,E="";function C(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(r=e,btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_"));var r;return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);return _.test(t)?t:E}catch(e){return E}}function S(e){return`${e.appName}!${e.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A=new Map;function D(e,t){const r=S(e);M(r,t),function(e,t){const r=O();r&&r.postMessage({key:e,fid:t});R()}(r,t)}function M(e,t){const r=A.get(e);if(r)for(const e of r)e(t)}let P=null;function O(){return!P&&"BroadcastChannel"in self&&(P=new BroadcastChannel("[Firebase] FID Change"),P.onmessage=e=>{M(e.data.key,e.data.fid)}),P}function R(){0===A.size&&P&&(P.close(),P=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x="firebase-installations-database",B=1,N="firebase-installations-store";let j=null;function K(){return j||(j=(0,a.openDB)(x,B,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(N)}})),j}async function L(e,t){const r=S(e),n=(await K()).transaction(N,"readwrite"),i=n.objectStore(N),s=await i.get(r);return await i.put(t,r),await n.done,s&&s.fid===t.fid||D(e,t.fid),t}async function q(e){const t=S(e),r=(await K()).transaction(N,"readwrite");await r.objectStore(N).delete(t),await r.done}async function F(e,t){const r=S(e),n=(await K()).transaction(N,"readwrite"),i=n.objectStore(N),s=await i.get(r),a=t(s);return a===undefined?await i.delete(r):await i.put(a,r),await n.done,!a||s&&s.fid===a.fid||D(e,a.fid),a}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U(e){let t;const r=await F(e.appConfig,(r=>{const n=function(e){const t=e||{fid:C(),registrationStatus:0};return W(t)}(r),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(g.create("app-offline"))}}const r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=async function(e,t){try{const r=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:r}){const n=m(e),i=w(e),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={fid:r,authVersion:h,appId:e.appId,sdkVersion:d},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await T((()=>fetch(n,o)));if(c.ok){const e=await c.json();return{fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:b(e.authToken)}}throw await v("Create Installation",c)}(e,t);return L(e.appConfig,r)}catch(r){throw y(r)&&409===r.customData.serverCode?await q(e.appConfig):await L(e.appConfig,{fid:t.fid,registrationStatus:0}),r}}(e,r);return{installationEntry:r,registrationPromise:n}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:H(e)}:{installationEntry:t}}(e,n);return t=i.registrationPromise,i.installationEntry}));return r.fid===E?{installationEntry:await t}:{installationEntry:r,registrationPromise:t}}async function H(e){let t=await $(e.appConfig);for(;1===t.registrationStatus;)await I(100),t=await $(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:r}=await U(e);return r||t}return t}function $(e){return F(e,(e=>{if(!e)throw g.create("installation-not-found");return W(e)}))}function W(e){return 1===(t=e).registrationStatus&&t.registrationTime+u<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function z({appConfig:e,heartbeatServiceProvider:t},r){const n=function(e,{fid:t}){return`${m(e)}/${t}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,r),i=k(e,r),s=t.getImmediate({optional:!0});if(s){const e=await s.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const a={installation:{sdkVersion:d,appId:e.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await T((()=>fetch(n,o)));if(c.ok){return b(await c.json())}throw await v("Generate Auth Token",c)}async function G(e,t=!1){let r;const n=await F(e.appConfig,(n=>{if(!Y(n))throw g.create("not-registered");const i=n.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+f}(e)}(i))return n;if(1===i.requestStatus)return r=async function(e,t){let r=await V(e.appConfig);for(;1===r.authToken.requestStatus;)await I(100),r=await V(e.appConfig);const n=r.authToken;return 0===n.requestStatus?G(e,t):n}(e,t),n;{if(!navigator.onLine)throw g.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(n);return r=async function(e,t){try{const r=await z(e,t),n=Object.assign(Object.assign({},t),{authToken:r});return await L(e.appConfig,n),r}catch(r){if(!y(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode){const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await L(e.appConfig,r)}else await q(e.appConfig);throw r}}(e,t),t}}));return r?await r:n.authToken}function V(e){return F(e,(e=>{if(!Y(e))throw g.create("not-registered");const t=e.authToken;return 1===(r=t).requestStatus&&r.requestTime+u<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var r;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function Y(e){return e!==undefined&&2===e.registrationStatus}async function Q(e){const t=e,{installationEntry:r,registrationPromise:n}=await U(t);return n?n.catch(console.error):G(t).catch(console.error),r.fid}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J(e,t=!1){const r=e;await async function(e){const{registrationPromise:t}=await U(e);t&&await t}(r);return(await G(r,t)).token}function X(e){return g.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z="installations",ee=e=>{const t=e.getProvider("app").getImmediate(),r=function(e){if(!e||!e.options)throw X("App Configuration");if(!e.name)throw X("App Name");const t=["projectId","apiKey","appId"];for(const r of t)if(!e.options[r])throw X(r);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:r,heartbeatServiceProvider:(0,n._getProvider)(t,"heartbeat"),_delete:()=>Promise.resolve()}},te=e=>{const t=e.getProvider("app").getImmediate(),r=(0,n._getProvider)(t,Z).getImmediate();return{getId:()=>Q(r),getToken:e=>J(r,e)}};(0,n._registerComponent)(new i.Component(Z,ee,"PUBLIC")),(0,n._registerComponent)(new i.Component("installations-internal",te,"PRIVATE")),(0,n.registerVersion)(o,c),(0,n.registerVersion)(o,c,"esm2017")}}},{package:"@metamask/notification-services-controller>firebase>@firebase/installations",file:"node_modules/@firebase/installations/dist/esm/index.esm2017.js"}],[591,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const n=[];var i;r.LogLevel=void 0,(i=r.LogLevel||(r.LogLevel={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";const s={debug:r.LogLevel.DEBUG,verbose:r.LogLevel.VERBOSE,info:r.LogLevel.INFO,warn:r.LogLevel.WARN,error:r.LogLevel.ERROR,silent:r.LogLevel.SILENT},a=r.LogLevel.INFO,o={[r.LogLevel.DEBUG]:"log",[r.LogLevel.VERBOSE]:"log",[r.LogLevel.INFO]:"info",[r.LogLevel.WARN]:"warn",[r.LogLevel.ERROR]:"error"},c=(e,t,...r)=>{if(t<e.logLevel)return;const n=(new Date).toISOString(),i=o[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${n}]  ${e.name}:`,...r)};r.Logger=class{constructor(e){this.name=e,this._logLevel=a,this._logHandler=c,this._userLogHandler=null,n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in r.LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,r.LogLevel.DEBUG,...e),this._logHandler(this,r.LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,r.LogLevel.VERBOSE,...e),this._logHandler(this,r.LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,r.LogLevel.INFO,...e),this._logHandler(this,r.LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,r.LogLevel.WARN,...e),this._logHandler(this,r.LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,r.LogLevel.ERROR,...e),this._logHandler(this,r.LogLevel.ERROR,...e)}},r.setLogLevel=function(e){n.forEach((t=>{t.setLogLevel(e)}))},r.setUserLogHandler=function(e,t){for(const i of n){let n=null;t&&t.level&&(n=s[t.level]),i.userLogHandler=null===e?null:(t,i,...s)=>{const a=s.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((e=>e)).join(" ");i>=(null!=n?n:t.logLevel)&&e({level:r.LogLevel[i].toLowerCase(),message:a,args:s,type:t.name})}}}}}},{package:"@metamask/notification-services-controller>firebase>@firebase/app>@firebase/logger",file:"node_modules/@firebase/logger/dist/index.cjs.js"}],[592,{"@firebase/app":588,"@firebase/component":589,"@firebase/installations":590,"@firebase/util":594,idb:4566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.deleteToken=function(e){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e){if(!navigator)throw P.create("only-available-in-window");e.swRegistration||await U(e);return async function(e){const t=await S(e.firebaseDependencies);t&&(await O(e.firebaseDependencies,t.token),await async function(e){const t=D(e),r=(await C()).transaction(_,"readwrite");await r.objectStore(_).delete(t),await r.done}(e.firebaseDependencies));const r=await e.swRegistration.pushManager.getSubscription();if(r)return r.unsubscribe();return!0}(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e=(0,s.getModularInstance)(e))},r.getMessaging=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e=(0,a.getApp)()){return Q().then((e=>{if(!e)throw P.create("unsupported-browser")}),(e=>{throw P.create("indexed-db-unsupported")})),(0,a._getProvider)((0,s.getModularInstance)(e),"messaging").getImmediate()},r.getToken=async function(e,t){return H(e=(0,s.getModularInstance)(e),t)},r.isSupported=Q,r.onMessage=function(e,t){return function(e,t){if(!navigator)throw P.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=(0,s.getModularInstance)(e),t)},e("@firebase/installations");var n=e("@firebase/component"),i=e("idb"),s=e("@firebase/util"),a=e("@firebase/app");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const o="/firebase-messaging-sw.js",c="/firebase-cloud-messaging-push-scope",u="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",d="https://fcmregistrations.googleapis.com/v1",h="google.c.a.c_id",l="google.c.a.c_l",f="google.c.a.ts",p=1e4;var g,y;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function m(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function b(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),n=new Uint8Array(r.length);for(let e=0;e<r.length;++e)n[e]=r.charCodeAt(e);return n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(g||(g={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(y||(y={}));const v="fcm_token_details_db",w=5,k="fcm_token_object_Store";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const T="firebase-messaging-database",I=1,_="firebase-messaging-store";let E=null;function C(){return E||(E=(0,i.openDB)(T,I,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(_)}})),E}async function S(e){const t=D(e),r=await C(),n=await r.transaction(_).objectStore(_).get(t);if(n)return n;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(v))return null}let t=null;return(await(0,i.openDB)(v,w,{upgrade:async(r,n,i,s)=>{var a;if(n<2)return;if(!r.objectStoreNames.contains(k))return;const o=s.objectStore(k),c=await o.index("fcmSenderId").get(e);if(await o.clear(),c)if(2===n){const e=c;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(a=e.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:m(e.vapidKey)}}}else if(3===n){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:m(e.auth),p256dh:m(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:m(e.vapidKey)}}}else if(4===n){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:m(e.auth),p256dh:m(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:m(e.vapidKey)}}}}})).close(),await(0,i.deleteDB)(v),await(0,i.deleteDB)("fcm_vapid_details_db"),await(0,i.deleteDB)("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await A(e,t),t}}async function A(e,t){const r=D(e),n=(await C()).transaction(_,"readwrite");return await n.objectStore(_).put(t,r),await n.done,t}function D({appConfig:e}){return e.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},P=new s.ErrorFactory("messaging","Messaging",M);async function O(e,t){const r={method:"DELETE",headers:await x(e)};try{const n=await fetch(`${R(e.appConfig)}/${t}`,r),i=await n.json();if(i.error){const e=i.error.message;throw P.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw P.create("token-unsubscribe-failed",{errorInfo:null==e?void 0:e.toString()})}}function R({projectId:e}){return`${d}/projects/${e}/registrations`}async function x({appConfig:e,installations:t}){const r=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function B({p256dh:e,auth:t,endpoint:r,vapidKey:n}){const i={web:{endpoint:r,auth:t,p256dh:e}};return n!==u&&(i.web.applicationPubKey=n),i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=6048e5;async function j(e){const t=await async function(e,t){const r=await e.pushManager.getSubscription();if(r)return r;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:b(t)})}(e.swRegistration,e.vapidKey),r={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:m(t.getKey("auth")),p256dh:m(t.getKey("p256dh"))},n=await S(e.firebaseDependencies);if(n){if(function(e,t){const r=t.vapidKey===e.vapidKey,n=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return r&&n&&i&&s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n.subscriptionOptions,r))return Date.now()>=n.createTime+N?async function(e,t){try{const r=await async function(e,t){const r=await x(e),n=B(t.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(n)};let s;try{const r=await fetch(`${R(e.appConfig)}/${t.token}`,i);s=await r.json()}catch(e){throw P.create("token-update-failed",{errorInfo:null==e?void 0:e.toString()})}if(s.error){const e=s.error.message;throw P.create("token-update-failed",{errorInfo:e})}if(!s.token)throw P.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),n=Object.assign(Object.assign({},t),{token:r,createTime:Date.now()});return await A(e.firebaseDependencies,n),r}catch(e){throw e}}(e,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{await O(e.firebaseDependencies,n.token)}catch(e){console.warn(e)}return K(e.firebaseDependencies,r)}return K(e.firebaseDependencies,r)}async function K(e,t){const r=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){const r=await x(e),n=B(t),i={method:"POST",headers:r,body:JSON.stringify(n)};let s;try{const t=await fetch(R(e.appConfig),i);s=await t.json()}catch(e){throw P.create("token-subscribe-failed",{errorInfo:null==e?void 0:e.toString()})}if(s.error){const e=s.error.message;throw P.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw P.create("token-subscribe-no-token");return s.token}(e,t),n={token:r,createTime:Date.now(),subscriptionOptions:t};return await A(e,n),n.token}function L(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const r=t.notification.title;r&&(e.notification.title=r);const n=t.notification.body;n&&(e.notification.body=n);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var r,n,i,s,a;if(!t.fcmOptions&&!(null===(r=t.notification)||void 0===r?void 0:r.click_action))return;e.fcmOptions={};const o=null!==(i=null===(n=t.fcmOptions)||void 0===n?void 0:n.link)&&void 0!==i?i:null===(s=t.notification)||void 0===s?void 0:s.click_action;o&&(e.fcmOptions.link=o);const c=null===(a=t.fcmOptions)||void 0===a?void 0:a.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),t}function q(e){return P.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(e,t){const r=[];for(let n=0;n<e.length;n++)r.push(e.charAt(n)),n<t.length&&r.push(t.charAt(n));r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class F{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const n=function(e){if(!e||!e.options)throw q("App Configuration Object");if(!e.name)throw q("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:r}=e;for(const e of t)if(!r[e])throw q(e);return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:n,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U(e){try{e.swRegistration=await navigator.serviceWorker.register(o,{scope:c}),e.swRegistration.update().catch((()=>{})),await async function(e){return new Promise(((t,r)=>{const n=setTimeout((()=>r(new Error(`Service worker not registered after ${p} ms`))),p),i=e.installing||e.waiting;e.active?(clearTimeout(n),t()):i?i.onstatechange=e=>{var r;"activated"===(null===(r=e.target)||void 0===r?void 0:r.state)&&(i.onstatechange=null,clearTimeout(n),t())}:(clearTimeout(n),r(new Error("No incoming service worker found.")))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.swRegistration)}catch(e){throw P.create("failed-service-worker-registration",{browserErrorMessage:null==e?void 0:e.message})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function H(e,t){if(!navigator)throw P.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw P.create("permission-blocked");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=u)}(e,null==t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await U(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw P.create("invalid-sw-registration");e.swRegistration=t}}(e,null==t?void 0:t.serviceWorkerRegistration),j(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $(e,t,r){const n=function(e){switch(e){case y.NOTIFICATION_CLICKED:return"notification_open";case y.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:r[h],message_name:r[l],message_time:r[f],message_device_time:Math.floor(Date.now()/1e3)})}async function W(e,t){const r=t.data;if(!r.isFirebaseMessaging)return;e.onMessageHandler&&r.messageType===y.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(L(r)):e.onMessageHandler.next(L(r)));const n=r.data;var i;"object"==typeof(i=n)&&i&&h in i&&"1"===n["google.c.a.e"]&&await $(e,r.messageType,n)}const z="@firebase/messaging",G="0.12.16",V=e=>{const t=new F(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>W(t,e))),t},Y=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>H(t,e)}};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Q(){try{await(0,s.validateIndexedDBOpenable)()}catch(e){return!1}return"undefined"!=typeof window&&(0,s.isIndexedDBAvailable)()&&(0,s.areCookiesEnabled)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}(0,a._registerComponent)(new n.Component("messaging",V,"PUBLIC")),(0,a._registerComponent)(new n.Component("messaging-internal",Y,"PRIVATE")),(0,a.registerVersion)(z,G),(0,a.registerVersion)(z,G,"esm2017")}}},{package:"@metamask/notification-services-controller>firebase>@firebase/messaging",file:"node_modules/@firebase/messaging/dist/esm/index.esm2017.js"}],[593,{"@firebase/app":588,"@firebase/component":589,"@firebase/installations":590,"@firebase/util":594,idb:4566},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),e("@firebase/installations");var n=e("@firebase/component"),i=e("idb"),s=e("@firebase/util"),a=e("@firebase/app");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const o="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",c="https://fcmregistrations.googleapis.com/v1",u="FCM_MSG",d="google.c.a.c_id",h=3,l=1;var f,p;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function g(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),n=new Uint8Array(r.length);for(let e=0;e<r.length;++e)n[e]=r.charCodeAt(e);return n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(f||(f={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(p||(p={}));const m="fcm_token_details_db",b=5,v="fcm_token_object_Store";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const w="firebase-messaging-database",k=1,T="firebase-messaging-store";let I=null;function _(){return I||(I=i.openDB(w,k,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(T)}})),I}async function E(e){const t=S(e),r=await _(),n=await r.transaction(T).objectStore(T).get(t);if(n)return n;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map((e=>e.name));if(!e.includes(m))return null}let t=null;return(await i.openDB(m,b,{upgrade:async(r,n,i,s)=>{var a;if(n<2)return;if(!r.objectStoreNames.contains(v))return;const o=s.objectStore(v),c=await o.index("fcmSenderId").get(e);if(await o.clear(),c)if(2===n){const e=c;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(a=e.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:g(e.vapidKey)}}}else if(3===n){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:g(e.auth),p256dh:g(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:g(e.vapidKey)}}}else if(4===n){const e=c;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:g(e.auth),p256dh:g(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:g(e.vapidKey)}}}}})).close(),await i.deleteDB(m),await i.deleteDB("fcm_vapid_details_db"),await i.deleteDB("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await C(e,t),t}}async function C(e,t){const r=S(e),n=(await _()).transaction(T,"readwrite");return await n.objectStore(T).put(t,r),await n.done,t}function S({appConfig:e}){return e.appId}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},D=new s.ErrorFactory("messaging","Messaging",A);async function M(e,t){const r={method:"DELETE",headers:await O(e)};try{const n=await fetch(`${P(e.appConfig)}/${t}`,r),i=await n.json();if(i.error){const e=i.error.message;throw D.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw D.create("token-unsubscribe-failed",{errorInfo:null==e?void 0:e.toString()})}}function P({projectId:e}){return`${c}/projects/${e}/registrations`}async function O({appConfig:e,installations:t}){const r=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function R({p256dh:e,auth:t,endpoint:r,vapidKey:n}){const i={web:{endpoint:r,auth:t,p256dh:e}};return n!==o&&(i.web.applicationPubKey=n),i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x=6048e5;async function B(e){const t=await async function(e,t){const r=await e.pushManager.getSubscription();if(r)return r;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:y(t)})}(e.swRegistration,e.vapidKey),r={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:g(t.getKey("auth")),p256dh:g(t.getKey("p256dh"))},n=await E(e.firebaseDependencies);if(n){if(function(e,t){const r=t.vapidKey===e.vapidKey,n=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return r&&n&&i&&s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n.subscriptionOptions,r))return Date.now()>=n.createTime+x?async function(e,t){try{const r=await async function(e,t){const r=await O(e),n=R(t.subscriptionOptions),i={method:"PATCH",headers:r,body:JSON.stringify(n)};let s;try{const r=await fetch(`${P(e.appConfig)}/${t.token}`,i);s=await r.json()}catch(e){throw D.create("token-update-failed",{errorInfo:null==e?void 0:e.toString()})}if(s.error){const e=s.error.message;throw D.create("token-update-failed",{errorInfo:e})}if(!s.token)throw D.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),n=Object.assign(Object.assign({},t),{token:r,createTime:Date.now()});return await C(e.firebaseDependencies,n),r}catch(e){throw e}}(e,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{await M(e.firebaseDependencies,n.token)}catch(e){console.warn(e)}return j(e.firebaseDependencies,r)}return j(e.firebaseDependencies,r)}async function N(e){const t=await E(e.firebaseDependencies);t&&(await M(e.firebaseDependencies,t.token),await async function(e){const t=S(e),r=(await _()).transaction(T,"readwrite");await r.objectStore(T).delete(t),await r.done}(e.firebaseDependencies));const r=await e.swRegistration.pushManager.getSubscription();return!r||r.unsubscribe()}async function j(e,t){const r=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */await async function(e,t){const r=await O(e),n=R(t),i={method:"POST",headers:r,body:JSON.stringify(n)};let s;try{const t=await fetch(P(e.appConfig),i);s=await t.json()}catch(e){throw D.create("token-subscribe-failed",{errorInfo:null==e?void 0:e.toString()})}if(s.error){const e=s.error.message;throw D.create("token-subscribe-failed",{errorInfo:e})}if(!s.token)throw D.create("token-subscribe-no-token");return s.token}(e,t),n={token:r,createTime:Date.now(),subscriptionOptions:t};return await C(e,n),n.token}async function K(e,t){const r=function(e,t){var r,n;const i={};e.from&&(i.project_number=e.from);e.fcmMessageId&&(i.message_id=e.fcmMessageId);i.instance_id=t,e.notification?i.message_type=f.DISPLAY_NOTIFICATION.toString():i.message_type=f.DATA_MESSAGE.toString();i.sdk_platform=h.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),!e.collapse_key||(i.collapse_key=e.collapse_key);i.event=l.toString(),!(null===(r=e.fcmOptions)||void 0===r?void 0:r.analytics_label)||(i.analytics_label=null===(n=e.fcmOptions)||void 0===n?void 0:n.analytics_label);return i}(t,await e.firebaseDependencies.installations.getId());!function(e,t,r){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify({messaging_client_event:t}),!r||(n.compliance_data=function(e){const t={privacy_context:{prequest:{origin_associated_product_id:e}}};return t}(r));e.logEvents.push(n)}(e,r,t.productId)}async function L(e,t){const r=function({data:e}){if(!e)return null;try{return e.json()}catch(e){return null}}(e);if(!r)return;t.deliveryMetricsExportedToBigQueryEnabled&&await K(t,r);const n=await F();if(function(e){return e.some((e=>"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")))}(n))return function(e,t){t.isFirebaseMessaging=!0,t.messageType=p.PUSH_RECEIVED;for(const r of e)r.postMessage(t)}(n,r);if(r.notification&&await function(e){var t;const{actions:r}=e,{maxActions:n}=Notification;r&&n&&r.length>n&&console.warn(`This browser only supports ${n} actions. The remaining actions will not be displayed.`);return self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}(function(e){const t=Object.assign({},e.notification);return t.data={[u]:e},t}(r)),t&&t.onBackgroundMessageHandler){const e=function(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const r=t.notification.title;r&&(e.notification.title=r);const n=t.notification.body;n&&(e.notification.body=n);const i=t.notification.image;i&&(e.notification.image=i);const s=t.notification.icon;s&&(e.notification.icon=s)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){var r,n,i,s,a;if(!t.fcmOptions&&!(null===(r=t.notification)||void 0===r?void 0:r.click_action))return;e.fcmOptions={};const o=null!==(i=null===(n=t.fcmOptions)||void 0===n?void 0:n.link)&&void 0!==i?i:null===(s=t.notification)||void 0===s?void 0:s.click_action;o&&(e.fcmOptions.link=o);const c=null===(a=t.fcmOptions)||void 0===a?void 0:a.analytics_label;c&&(e.fcmOptions.analyticsLabel=c)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),t}(r);"function"==typeof t.onBackgroundMessageHandler?await t.onBackgroundMessageHandler(e):t.onBackgroundMessageHandler.next(e)}}async function q(e){var t,r;const n=null===(r=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===r?void 0:r[u];if(!n)return;if(e.action)return;e.stopImmediatePropagation(),e.notification.close();const i=function(e){var t,r,n;const i=null!==(r=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==r?r:null===(n=e.notification)||void 0===n?void 0:n.click_action;if(i)return i;return s=e.data,"object"==typeof s&&s&&d in s?self.location.origin:null;var s;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n);if(!i)return;const s=new URL(i,self.location.href),a=new URL(self.location.origin);if(s.host!==a.host)return;let o=await async function(e){const t=await F();for(const r of t){const t=new URL(r.url,self.location.href);if(e.host===t.host)return r}return null}(s);var c;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return o?o=await o.focus():(o=await self.clients.openWindow(i),await(c=3e3,new Promise((e=>{setTimeout(e,c)})))),o?(n.messageType=p.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,o.postMessage(n)):void 0}function F(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function U(e){return D.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e,t){const r=[];for(let n=0;n<e.length;n++)r.push(e.charAt(n)),n<t.length&&r.push(t.charAt(n));r.join("")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class H{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const n=function(e){if(!e||!e.options)throw U("App Configuration Object");if(!e.name)throw U("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:r}=e;for(const e of t)if(!r[e])throw U(e);return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:n,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=e=>{const t=new H(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return self.addEventListener("push",(e=>{e.waitUntil(L(e,t))})),self.addEventListener("pushsubscriptionchange",(e=>{e.waitUntil(async function(e,t){var r,n;const{newSubscription:i}=e;if(!i)return void await N(t);const s=await E(t.firebaseDependencies);await N(t),t.vapidKey=null!==(n=null===(r=null==s?void 0:s.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==n?n:o,await B(t)}(e,t))})),self.addEventListener("notificationclick",(e=>{e.waitUntil(q(e))})),t};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function W(){return s.isIndexedDBAvailable()&&await s.validateIndexedDBOpenable()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */a._registerComponent(new n.Component("messaging-sw",$,"PUBLIC")),r.experimentalSetDeliveryMetricsExportedToBigQueryEnabled=function(e,t){
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e,t){e.deliveryMetricsExportedToBigQueryEnabled=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e=s.getModularInstance(e),t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.getMessaging=function(e=a.getApp()){return W().then((e=>{if(!e)throw D.create("unsupported-browser")}),(e=>{throw D.create("indexed-db-unsupported")})),a._getProvider(s.getModularInstance(e),"messaging-sw").getImmediate()},r.isSupported=W,r.onBackgroundMessage=function(e,t){return function(e,t){if(self.document!==undefined)throw D.create("only-available-in-sw");return e.onBackgroundMessageHandler=t,()=>{e.onBackgroundMessageHandler=null}}(e=s.getModularInstance(e),t)}}}},{package:"@metamask/notification-services-controller>firebase>@firebase/messaging",file:"node_modules/@firebase/messaging/dist/index.sw.cjs"}],[594,{_process:4932},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Sha1=r.RANDOM_FACTOR=r.MAX_VALUE_MILLIS=r.FirebaseError=r.ErrorFactory=r.Deferred=r.DecodeBase64StringError=r.CONSTANTS=void 0,r.areCookiesEnabled=function(){if("undefined"==typeof navigator||!navigator.cookieEnabled)return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.assertionError=r.assert=void 0,r.async=function(e,t){return(...r)=>{Promise.resolve(!0).then((()=>{e(...r)})).catch((e=>{t&&t(e)}))}},r.base64urlEncodeWithoutPadding=r.base64Encode=r.base64Decode=r.base64=void 0,r.calculateBackoffMillis=function(e,t=A,r=D){const n=t*Math.pow(r,e),i=Math.round(P*n*(Math.random()-.5)*2);return Math.min(M,n+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[u(JSON.stringify({alg:"none",type:"JWT"})),u(JSON.stringify(s)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.createSubscribe=function(e,t){const r=new E(e,t);return r.subscribe.bind(r)},r.decode=void 0,r.deepCopy=function(e){return h(undefined,e)},r.deepEqual=function e(t,r){if(t===r)return!0;const n=Object.keys(t),i=Object.keys(r);for(const s of n){if(!i.includes(s))return!1;const n=t[s],a=r[s];if(_(n)&&_(a)){if(!e(n,a))return!1}else if(n!==a)return!1}for(const e of i)if(!n.includes(e))return!1;return!0},r.deepExtend=h,r.errorPrefix=S,r.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:undefined)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.getExperimentalSetting=r.getDefaults=r.getDefaultEmulatorHostnameAndPort=r.getDefaultEmulatorHost=r.getDefaultAppConfig=void 0,r.getGlobal=l,r.getModularInstance=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){return e&&e._delegate?e._delegate:e},r.getUA=y,r.isAdmin=void 0,r.isBrowser=function(){return"undefined"!=typeof window||b()},r.isBrowserExtension=function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:undefined;return"object"==typeof e&&e.id!==undefined},r.isCloudflareWorker=function(){return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent},r.isElectron=function(){return y().indexOf("Electron/")>=0},r.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},r.isIE=function(){const e=y();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},r.isIndexedDBAvailable=function(){try{return"object"==typeof indexedDB}catch(e){return!1}},r.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(y())},r.isNode=m,r.isNodeSdk=function(){return!0===t.NODE_CLIENT||!0===t.NODE_ADMIN},r.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},r.isSafari=function(){return!m()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},r.isUWP=function(){return y().indexOf("MSAppHost/")>=0},r.isValidTimestamp=r.isValidFormat=void 0,r.isWebWorker=b,r.issuedAtTime=void 0,r.jsonEval=T,r.map=function(e,t,r){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=t.call(r,e[i],i,e));return n},r.ordinal=function(e){if(!Number.isFinite(e))return`${e}`;return e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const r=e%10;if(1===r)return"st";if(2===r)return"nd";if(3===r)return"rd";return"th"}(e)},r.promiseWithTimeout=
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t=2e3){const r=new g;return setTimeout((()=>r.reject("timeout!")),t),e.then(r.resolve,r.reject),r.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.querystring=function(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach((e=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""},r.querystringDecode=function(e){const t={},r=e.replace(/^\?/,"").split("&");return r.forEach((e=>{if(e){const[r,n]=e.split("=");t[decodeURIComponent(r)]=decodeURIComponent(n)}})),t},r.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:undefined},r.stringToByteArray=r.stringLength=void 0,r.stringify=function(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.validateArgCount=void 0,r.validateCallback=function(e,t,r,n){if(n&&!r)return;if("function"!=typeof r)throw new Error(S(e,t)+"must be a valid function.")},r.validateContextObject=function(e,t,r,n){if(n&&!r)return;if("object"!=typeof r||null===r)throw new Error(S(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,r.validateIndexedDBOpenable=function(){return new Promise(((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}}))},r.validateNamespace=function(e,t,r){if(r&&!t)return;if("string"!=typeof t)throw new Error(S(e,"namespace")+"must be a valid firebase namespace.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const t=r.CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},n=function(e,t){if(!e)throw i(t)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.assert=n;const i=function(e){return new Error("Firebase Database ("+t.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.assertionError=i;const s=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t},a=r.base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,c=o?e[t+2]:0,u=i>>2,d=(3&i)<<4|a>>4;let h=(15&a)<<2|c>>6,l=63&c;o||(l=64,s||(h=64)),n.push(r[u],r[d],r[h],r[l])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let r=0,n=0;for(;r<e.length;){const i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else{const s=e[r++],a=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){const i=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0;++t;const a=t<e.length?r[e.charAt(t)]:64;++t;const c=t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==c)throw new o;const u=i<<2|s>>4;if(n.push(u),64!==a){const e=s<<4&240|a>>2;if(n.push(e),64!==c){const e=a<<6&192|c;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}r.DecodeBase64StringError=o;const c=function(e){const t=s(e);return a.encodeByteArray(t,!0)};r.base64Encode=c;const u=function(e){return c(e).replace(/\./g,"")};r.base64urlEncodeWithoutPadding=u;const d=function(e){try{return a.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:e===undefined&&(e={});break;case Array:e=[];break;default:return t}for(const r in t)t.hasOwnProperty(r)&&"__proto__"!==r&&(e[r]=h(e[r],t[r]));return e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function l(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */r.base64Decode=d;const f=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if(void 0===e||void 0===e.env)return})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&d(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}};r.getDefaults=f;const p=e=>{var t,r;return null===(r=null===(t=f())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]};r.getDefaultEmulatorHost=p;r.getDefaultEmulatorHostnameAndPort=e=>{const t=p(e);if(!t)return undefined;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]};r.getDefaultAppConfig=()=>{var e;return null===(e=f())||void 0===e?void 0:e.config};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.getExperimentalSetting=e=>{var t;return null===(t=f())||void 0===t?void 0:t[`_${e}`]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,r))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){var e;const t=null===(e=f())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function b(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}r.Deferred=g;class v extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}r.FirebaseError=v;class w{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(k,((e,r)=>{const n=t[r];return null!=n?String(n):`<${r}?>`}))}(i,r):"Error",a=`${this.serviceName}: ${s} (${n}).`;return new v(n,a,r)}}r.ErrorFactory=w;const k=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(e){return JSON.parse(e)}const I=function(e){let t={},r={},n={},i="";try{const s=e.split(".");t=T(d(s[0])||""),r=T(d(s[1])||""),i=s[2],n=r.d||{},delete r.d}catch(e){}return{header:t,claims:r,data:n,signature:i}};r.decode=I;r.isValidTimestamp=function(e){const t=I(e).claims,r=Math.floor((new Date).getTime()/1e3);let n=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?n=t.nbf:t.hasOwnProperty("iat")&&(n=t.iat),i=t.hasOwnProperty("exp")?t.exp:n+86400),!!r&&!!n&&!!i&&r>=n&&r<=i};r.issuedAtTime=function(e){const t=I(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null};r.isValidFormat=function(e){const t=I(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")};function _(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.isAdmin=function(e){const t=I(e).claims;return"object"==typeof t&&!0===t.admin};r.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const r=this.W_;if("string"==typeof e)for(let n=0;n<16;n++)r[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let n=0;n<16;n++)r[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let e=16;e<80;e++){const t=r[e-3]^r[e-8]^r[e-14]^r[e-16];r[e]=4294967295&(t<<1|t>>>31)}let n,i,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(let e=0;e<80;e++){e<40?e<20?(n=c^a&(o^c),i=1518500249):(n=a^o^c,i=1859775393):e<60?(n=a&o|c&(a|o),i=2400959708):(n=a^o^c,i=3395469782);const t=(s<<5|s>>>27)+n+u+i+r[e]&4294967295;u=c,c=o,o=4294967295&(a<<30|a>>>2),a=s,s=t}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;t===undefined&&(t=e.length);const r=t-this.blockSize;let n=0;const i=this.buf_;let s=this.inbuf_;for(;n<t;){if(0===s)for(;n<=r;)this.compress_(e,n),n+=this.blockSize;if("string"==typeof e){for(;n<t;)if(i[s]=e.charCodeAt(n),++s,++n,s===this.blockSize){this.compress_(i),s=0;break}}else for(;n<t;)if(i[s]=e[n],++s,++n,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&t,t/=256;this.compress_(this.buf_);let r=0;for(let t=0;t<5;t++)for(let n=24;n>=0;n-=8)e[r]=this.chain_[t]>>n&255,++r;return e}};class E{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,r){let n;if(e===undefined&&t===undefined&&r===undefined)throw new Error("Missing Observer.");n=function(e,t){if("object"!=typeof e||null===e)return!1;for(const r of t)if(r in e&&"function"==typeof e[r])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},n.next===undefined&&(n.next=C),n.error===undefined&&(n.error=C),n.complete===undefined&&(n.complete=C);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch(e){}})),this.observers.push(n),i}unsubscribeOne(e){this.observers!==undefined&&this.observers[e]!==undefined&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&this.onNoObservers!==undefined&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(this.observers!==undefined&&this.observers[e]!==undefined)try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,e!==undefined&&(this.finalError=e),this.task.then((()=>{this.observers=undefined,this.onNoObservers=undefined})))}}function C(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e,t){return`${e} failed: ${t} argument `}r.validateArgCount=function(e,t,r,n){let i;if(n<t?i="at least "+t:n>r&&(i=0===r?"none":"no more than "+r),i){throw new Error(e+" failed: Was called with "+n+(1===n?" argument.":" arguments.")+" Expects "+i+".")}};r.stringToByteArray=function(e){const t=[];let r=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const t=s-55296;i++,n(i<e.length,"Surrogate pair missing trail surrogate.");s=65536+(t<<10)+(e.charCodeAt(i)-56320)}s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=63&s|128):s<65536?(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=63&s|128):(t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=63&s|128)}return t};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.stringLength=function(e){let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,r++):t+=3}return t};const A=1e3,D=2,M=r.MAX_VALUE_MILLIS=144e5,P=r.RANDOM_FACTOR=.5}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/notification-services-controller>firebase>@firebase/util",file:"node_modules/@firebase/util/dist/index.esm2017.js"}],[6,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=r.COOKIE_ID_MARKETING_WHITELIST=void 0;const n=r.COOKIE_ID_MARKETING_WHITELIST=["https://metamask.io","https://learn.metamask.io","https://mmi-support.zendesk.com","https://community.metamask.io","https://support.metamask.io"];r.COOKIE_ID_MARKETING_WHITELIST_ORIGINS=n.map((e=>new URL(e).origin))}}},{package:"$root$",file:"app/scripts/constants/marketing-site-whitelist.ts"}],[60,{"../../../shared/constants/metametrics":5654,"../../../shared/modules/hexstring-utils":5716,"@metamask/base-controller":1332,"@metamask/controller-utils":1360,"@metamask/message-manager":1963,"@metamask/utils":2874,buffer:3998,loglevel:4787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.managerName=r.isEIP1024EncryptedMessage=r.getDefaultState=r.default=void 0;var n,i=(n=e("loglevel"))&&n.__esModule?n:{default:n},s=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("@metamask/controller-utils"),c=e("@metamask/utils"),u=e("../../../shared/constants/metametrics"),d=e("../../../shared/modules/hexstring-utils");function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const l={unapprovedDecryptMsgs:{persist:!1,anonymous:!1},unapprovedDecryptMsgCount:{persist:!1,anonymous:!1}},f=r.managerName="DecryptMessageManager",p=e=>!!((0,c.isObject)(e.data)&&(0,c.hasProperty)(e.data,"version")&&(0,c.hasProperty)(e.data,"nonce")&&(0,c.hasProperty)(e.data,"ephemPublicKey")&&(0,c.hasProperty)(e.data,"ciphertext"));r.isEIP1024EncryptedMessage=p;const g=()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0});r.getDefaultState=g;class y extends a.BaseController{constructor({getState:e,metricsEvent:t,messenger:r,managerMessenger:n}){super({metadata:l,messenger:r,name:"DecryptMessageController",state:{unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0}}),h(this,"_getState",void 0),h(this,"_metricsEvent",void 0),h(this,"_decryptMessageManager",void 0),this._getState=e,this._metricsEvent=t,this._decryptMessageManager=new s.DecryptMessageManager({additionalFinishStatuses:["decrypted"],messenger:n}),r.subscribe(`${f}:unapprovedMessage`,this._requestApproval.bind(this)),this._subscribeToMessageState(r,((e,t,r)=>{e.unapprovedDecryptMsgs=t,e.unapprovedDecryptMsgCount=r}))}get unapprovedDecryptMsgCount(){return this._decryptMessageManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedDecryptMsgs:{},unapprovedDecryptMsgCount:0})))}clearUnapproved(){this._decryptMessageManager.clearUnapprovedMessages()}async newRequestDecryptMessage(e,t){return this._decryptMessageManager.addUnapprovedMessageAsync(e,t)}async decryptMessage(e){const t=e.metamaskId;try{const r=await this._decryptMessageManager.approveMessage(e);if(r.data=this._parseMessageData(r.data),!p(r))throw new Error("Invalid encrypted data.");const n=await this.messagingSystem.call("KeyringController:decryptMessage",r);this._decryptMessageManager.setMessageStatusAndResult(t,n,"decrypted"),this._acceptApproval(t)}catch(e){throw i.default.info("MetaMaskController - eth_decrypt failed.",e),this._cancelAbstractMessage(this._decryptMessageManager,t),e}return this._getState()}async decryptMessageInline(e){const t=e.metamaskId;if(e.data=this._parseMessageData(e.data),!p(e))throw new Error("Invalid encrypted data.");const r=await this.messagingSystem.call("KeyringController:decryptMessage",e);return this._decryptMessageManager.setResult(t,r),this._getState()}cancelDecryptMessage(e){return this._decryptMessageManager.rejectMessage(e),this._rejectApproval(e),this._getState()}rejectUnapproved(e){Object.keys(this._decryptMessageManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._decryptMessageManager,t,e)}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:u.MetaMetricsEventCategory.Messages,properties:{action:"Decrypt Message Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe(`${f}:stateChange`,(e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],i=this._migrateMessage(n);t[r]=i}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||o.ORIGIN_METAMASK;try{this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:o.ApprovalType.EthDecrypt},!0)}catch(e){i.default.info("Error adding request to approval controller",e)}}_parseMessageData(e){const r=(0,d.stripHexPrefix)(e),n=t.from(r,"hex");return JSON.parse(n.toString("utf8"))}_rejectApproval(e){try{this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}catch(e){i.default.info("Error rejecting request to approval controller",e)}}}r.default=y}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/decrypt-message.ts"}],[603,{"@ethereumjs/rlp":421,"@ethereumjs/tx":434,"@ethereumjs/util":613,"@keystonehq/bc-ur-registry-eth":623,buffer:3998,hdkey:4556,uuid:5587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,s=e("@ethereumjs/util"),a=e("@ethereumjs/rlp"),o=e("@ethereumjs/tx"),c=e("@keystonehq/bc-ur-registry-eth"),u=e("uuid");const d="QR Hardware Wallet Device",h="m",l="0/*";var f,p;!function(e){e.hd="hd",e.pubkey="pubkey"}(f||(f={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(p||(p={}));class g{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type=d,this.requestSignature=async(e,t,r,n)=>{const i=await this.getInteraction().requestSignature(t,r,n),s=i.getRequestId(),a=i.getSignature();if(s){if(u.stringify(s)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId")}return{r:a.slice(0,32),s:a.slice(32,64),v:a.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n=`m/${e.getOrigin().getPath()}`,i=null===(t=e.getOrigin().getSourceFingerprint())||void 0===t?void 0:t.toString("hex"),s=(null===(r=e.getChildren())||void 0===r?void 0:r.getPath())||l,a=e.getName();if(e.getNote()===p.standard?this.keyringAccount=p.standard:e.getNote()===p.ledger_legacy&&(this.keyringAccount=p.ledger_legacy),!i)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const o=e.getBip32Key();this.xfp=i,this.xpub=o,this.hdPath=n,this.childrenPath=s,a!==undefined&&""!==a&&(this.name=a),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null===(t=e.getMasterFingerprint())||void 0===t?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let i=!1;const a=e.getOutputDescriptors();if(!a||0===a.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(a.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null===(r=e.getOutputDescriptors())||void 0===r||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r=`M/${t.getOrigin().getPath()}`,n="0x"+s.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===p.ledger_live&&(this.keyringAccount=p.ledger_live),this.paths[s.toChecksumAddress(n)]===undefined&&(i=!0),this.paths[s.toChecksumAddress(n)]=r}}catch(e){throw new Error(`KeystoneError#invalid_data: ${e}`)}})),i},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(h,e);n.push({address:t,balance:null,index:e}),this.indexes[s.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(h,e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===f.hd){this.checkKeyring(),this.hdk||(this.hdk=i.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),a="0x"+s.publicToAddress(n.publicKey,!0).toString("hex");return s.toChecksumAddress(a)}{const e=Object.keys(this.paths)[t];if(e)return s.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=f.hd,this.keyringAccount=p.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath=l,this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===c.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=f.hd,this.__readCryptoHDKey(e)):(this.keyringMode=f.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||f.hd,this.keyringAccount=e.keyringAccount||p.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||l)}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex(h,e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===f.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?c.DataType.transaction:c.DataType.typedTransaction;let i;i=0===r.type?t.from(a.RLP.encode(r.getMessageToSign())):t.from(r.serialize());const s=await this._pathFromAddress(e),d=Number(r.common.chainId()),h=u.v4(),l=c.EthSignRequest.constructETHRequest(i,n,s,this.xfp,h,d),{r:f,s:p,v:g}=await this.requestSignature(h,l,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return o.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:f,s:p,v:g},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=s.stripHexPrefix(r),i=await this._pathFromAddress(e),a=u.v4(),o=c.EthSignRequest.constructETHRequest(t.from(n,"hex"),c.DataType.personalMessage,i,this.xfp,a,undefined,e),{r:d,s:h,v:l}=await this.requestSignature(a,o,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([Uint8Array.from(d),Uint8Array.from(h),Uint8Array.from(l)]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),i=u.v4(),s=c.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),c.DataType.typedData,n,this.xfp,i,undefined,e),{r:a,s:o,v:d}=await this.requestSignature(i,s,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([Uint8Array.from(a),Uint8Array.from(o),Uint8Array.from(d)]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===f.hd){const t=s.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex(h,e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=s.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}g.type=d,r.BaseKeyring=g}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.development.js"}],[604,{"@ethereumjs/rlp":421,"@ethereumjs/tx":434,"@ethereumjs/util":613,"@keystonehq/bc-ur-registry-eth":623,buffer:3998,hdkey:4556,uuid:5587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i,s,a=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,o=e("@ethereumjs/util"),c=e("@ethereumjs/rlp"),u=e("@ethereumjs/tx"),d=e("@keystonehq/bc-ur-registry-eth"),h=e("uuid");!function(e){e.hd="hd",e.pubkey="pubkey"}(i||(i={})),function(e){e.standard="account.standard",e.ledger_live="account.ledger_live",e.ledger_legacy="account.ledger_legacy"}(s||(s={}));class l{constructor(e){this.version=1,this.getInteraction=()=>{throw new Error("KeystoneError#invalid_extends: method getInteraction not implemented, please extend BaseKeyring by overwriting this method.")},this.type="QR Hardware Wallet Device",this.requestSignature=async(e,t,r,n)=>{const i=await this.getInteraction().requestSignature(t,r,n),s=i.getRequestId(),a=i.getSignature();if(s&&h.stringify(s)!==e)throw new Error("KeystoneError#invalid_data: read signature error: mismatched requestId");return{r:a.slice(0,32),s:a.slice(32,64),v:a.slice(64)}},this.__readCryptoHDKey=e=>{var t,r;const n="m/"+e.getOrigin().getPath(),i=null===(t=e.getOrigin().getSourceFingerprint())||void 0===t?void 0:t.toString("hex"),a=(null===(r=e.getChildren())||void 0===r?void 0:r.getPath())||"0/*",o=e.getName();if(e.getNote()===s.standard?this.keyringAccount=s.standard:e.getNote()===s.ledger_legacy&&(this.keyringAccount=s.ledger_legacy),!i)throw new Error("KeystoneError#invalid_data: invalid crypto-hdkey, cannot get source fingerprint");const c=e.getBip32Key();this.xfp=i,this.xpub=c,this.hdPath=n,this.childrenPath=a,void 0!==o&&""!==o&&(this.name=o),this.initialized=!0},this.__readCryptoAccount=e=>{var t,r;const n=null===(t=e.getMasterFingerprint())||void 0===t?void 0:t.toString("hex");if(!n)throw new Error("KeystoneError#invalid_data: invalid crypto-account, cannot get master fingerprint");this.xfp=n,this.initialized=!0;let i=!1;const a=e.getOutputDescriptors();if(!a||0===a.length)throw new Error("KeystoneError#invalid_data: invalid crypto-account, no crypto output found");if(a.length%5!=0)throw new Error("KeystoneError#invalid_data: only support 5x pubkey accounts for now");return null===(r=e.getOutputDescriptors())||void 0===r||r.forEach((e=>{try{const t=e.getHDKey();if(t){const e=t.getKey(),r="M/"+t.getOrigin().getPath(),n="0x"+o.publicToAddress(e,!0).toString("hex");this.name=t.getName(),t.getNote()===s.ledger_live&&(this.keyringAccount=s.ledger_live),void 0===this.paths[o.toChecksumAddress(n)]&&(i=!0),this.paths[o.toChecksumAddress(n)]=r}}catch(e){throw new Error("KeystoneError#invalid_data: "+e)}})),i},this.getName=()=>this.name,this.setAccountToUnlock=e=>{this.unlockedAccount=parseInt(e,10)},this.__getNormalPage=async e=>{this.page+=e,this.page<=0&&(this.page=1);const t=(this.page-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e}),this.indexes[o.toChecksumAddress(t)]=e}return n},this.__getLedgerLivePage=async e=>{const t=(this.page+e-1)*this.perPage,r=t+this.perPage,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push({address:t,balance:null,index:e})}return this.page+=e,n},this.__addressFromIndex=async(e,t)=>{if(this.keyringMode===i.hd){this.checkKeyring(),this.hdk||(this.hdk=a.fromExtendedKey(this.xpub));const r=this.childrenPath.replace("*",String(t)).replace(/\*/g,"0"),n=this.hdk.derive(`${e}/${r}`),i="0x"+o.publicToAddress(n.publicKey,!0).toString("hex");return o.toChecksumAddress(i)}{const e=Object.keys(this.paths)[t];if(e)return o.toChecksumAddress(e);throw new Error("KeystoneError#pubkey_account.no_expected_account")}},this.page=0,this.perPage=5,this.accounts=[],this.currentAccount=0,this.unlockedAccount=0,this.name="QR Hardware",this.keyringMode=i.hd,this.keyringAccount=s.standard,this.initialized=!1,this.xfp="",this.xpub="",this.hdPath="",this.childrenPath="0/*",this.indexes={},this.paths={},this.deserialize(e)}async readKeyring(){const e=await this.getInteraction().readCryptoHDKeyOrCryptoAccount();this.syncKeyring(e)}syncKeyring(e){e.getRegistryType().getType()===d.extend.RegistryTypes.CRYPTO_HDKEY.getType()?(this.keyringMode=i.hd,this.__readCryptoHDKey(e)):(this.keyringMode=i.pubkey,this.__readCryptoAccount(e))}checkKeyring(){if(!this.xfp||!this.xpub||!this.hdPath)throw new Error("KeystoneError#invalid_keyring: keyring not fulfilled, please call function `readKeyring` firstly")}serialize(){return Promise.resolve({initialized:this.initialized,accounts:this.accounts,currentAccount:this.currentAccount,page:this.page,perPage:this.perPage,keyringAccount:this.keyringAccount,keyringMode:this.keyringMode,name:this.name,version:this.version,xfp:this.xfp,xpub:this.xpub,hdPath:this.hdPath,childrenPath:this.childrenPath,indexes:this.indexes,paths:this.paths})}deserialize(e){e&&(this.accounts=e.accounts,this.currentAccount=e.currentAccount,this.page=e.page,this.perPage=e.perPage,this.name=e.name,this.initialized=e.initialized,this.keyringMode=e.keyringMode||i.hd,this.keyringAccount=e.keyringAccount||s.standard,this.xfp=e.xfp,this.xpub=e.xpub,this.hdPath=e.hdPath,this.indexes=e.indexes,this.paths=e.paths,this.childrenPath=e.childrenPath||"0/*")}setCurrentAccount(e){this.currentAccount=e}getCurrentAccount(){return this.currentAccount}getCurrentAddress(){return this.accounts[this.currentAccount]}async addAccounts(e=1){const t=this.unlockedAccount,r=t+e,n=[];for(let e=t;e<r;e++){const t=await this.__addressFromIndex("m",e);n.push(t),this.page=0,this.unlockedAccount++}return this.accounts=this.accounts.concat(n),this.accounts}getFirstPage(){return this.page=0,this.__getPage(1)}getNextPage(){return this.__getPage(1)}getPreviousPage(){return this.__getPage(-1)}async __getPage(e){return this.initialized||await this.readKeyring(),this.keyringMode===i.hd?this.__getNormalPage(e):this.__getLedgerLivePage(e)}getAccounts(){return Promise.resolve(this.accounts)}removeAccount(e){if(!this.accounts.map((e=>e.toLowerCase())).includes(e.toLowerCase()))throw new Error(`Address ${e} not found in this keyring`);this.accounts=this.accounts.filter((t=>t.toLowerCase()!==e.toLowerCase()))}async signTransaction(e,r){const n=0===r.type?d.DataType.transaction:d.DataType.typedTransaction;let i;i=0===r.type?t.from(c.RLP.encode(r.getMessageToSign())):t.from(r.serialize());const s=await this._pathFromAddress(e),a=Number(r.common.chainId()),o=h.v4(),l=d.EthSignRequest.constructETHRequest(i,n,s,this.xfp,o,a),{r:f,s:p,v:g}=await this.requestSignature(o,l,"Scan with your Keystone",'After your Keystone has signed the transaction, click on "Scan Keystone" to receive the signature');return u.TransactionFactory.fromTxData({...r.toJSON(),type:r.type,r:f,s:p,v:g},{common:r.common})}signMessage(e,t){return this.signPersonalMessage(e,t)}async signPersonalMessage(e,r){const n=o.stripHexPrefix(r),i=await this._pathFromAddress(e),s=h.v4(),a=d.EthSignRequest.constructETHRequest(t.from(n,"hex"),d.DataType.personalMessage,i,this.xfp,s,void 0,e),{r:c,s:u,v:l}=await this.requestSignature(s,a,"Scan with your Keystone",'After your Keystone has signed this message, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([Uint8Array.from(c),Uint8Array.from(u),Uint8Array.from(l)]).toString("hex")}async signTypedData(e,r){const n=await this._pathFromAddress(e),i=h.v4(),s=d.EthSignRequest.constructETHRequest(t.from(JSON.stringify(r),"utf-8"),d.DataType.typedData,n,this.xfp,i,void 0,e),{r:a,s:o,v:c}=await this.requestSignature(i,s,"Scan with your Keystone",'After your Keystone has signed this data, click on "Scan Keystone" to receive the signature');return"0x"+t.concat([Uint8Array.from(a),Uint8Array.from(o),Uint8Array.from(c)]).toString("hex")}async _pathFromAddress(e){if(this.keyringMode===i.hd){const t=o.toChecksumAddress(e);let r=this.indexes[t];if(void 0===r)for(let e=0;e<1e3;e++)if(t===await this.__addressFromIndex("m",e)){r=e;break}if(void 0===r)throw new Error("Unknown address");return`${this.hdPath}/${this.childrenPath.replace("*",r.toString()).replace(/\*/g,"0")}`}{const t=o.toChecksumAddress(e),r=this.paths[t];if(void 0===r)throw new Error("Unknown address");return r}}}l.type="QR Hardware Wallet Device",r.BaseKeyring=l}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/base-eth-keyring.cjs.production.min.js"}],[605,{"./base-eth-keyring.cjs.development.js":603,"./base-eth-keyring.cjs.production.min.js":604},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./base-eth-keyring.cjs.production.min.js")}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring",file:"node_modules/@keystonehq/base-eth-keyring/dist/index.js"}],[606,{"./bytes":609,"./constants":610,"./helpers":612,"./internal":614,"@ethereumjs/rlp":421,buffer:3998,"ethereum-cryptography/keccak":4224,"ethereum-cryptography/secp256k1":4241,"ethereum-cryptography/utils":4243},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.accountBodyToRLP=r.accountBodyToSlim=r.accountBodyFromSlim=r.isZeroAddress=r.zeroAddress=r.importPublic=r.privateToAddress=r.privateToPublic=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isValidAddress=r.Account=void 0;const n=e("@ethereumjs/rlp"),i=e("ethereum-cryptography/keccak"),s=e("ethereum-cryptography/secp256k1"),a=e("ethereum-cryptography/utils"),o=e("./bytes"),c=e("./constants"),u=e("./helpers"),d=e("./internal"),h=BigInt(0);class l{constructor(e=h,t=h,r=c.KECCAK256_RLP,n=c.KECCAK256_NULL){this.nonce=e,this.balance=t,this.storageRoot=r,this.codeHash=n,this._validate()}static fromAccountData(e){const{nonce:t,balance:r,storageRoot:n,codeHash:i}=e;return new l(t!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(t)):undefined,r!==undefined?(0,o.bufferToBigInt)((0,o.toBuffer)(r)):undefined,n!==undefined?(0,o.toBuffer)(n):undefined,i!==undefined?(0,o.toBuffer)(i):undefined)}static fromRlpSerializedAccount(e){const t=(0,o.arrToBufArr)(n.RLP.decode(Uint8Array.from(e)));if(!Array.isArray(t))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(t)}static fromValuesArray(e){const[t,r,n,i]=e;return new l((0,o.bufferToBigInt)(t),(0,o.bufferToBigInt)(r),n,i)}_validate(){if(this.nonce<h)throw new Error("nonce must be greater than zero");if(this.balance<h)throw new Error("balance must be greater than zero");if(32!==this.storageRoot.length)throw new Error("storageRoot must have a length of 32");if(32!==this.codeHash.length)throw new Error("codeHash must have a length of 32")}raw(){return[(0,o.bigIntToUnpaddedBuffer)(this.nonce),(0,o.bigIntToUnpaddedBuffer)(this.balance),this.storageRoot,this.codeHash]}serialize(){return t.from(n.RLP.encode((0,o.bufArrToArr)(this.raw())))}isContract(){return!this.codeHash.equals(c.KECCAK256_NULL)}isEmpty(){return this.balance===h&&this.nonce===h&&this.codeHash.equals(c.KECCAK256_NULL)}}r.Account=l;r.isValidAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return/^0x[0-9a-fA-F]{40}$/.test(e)};r.toChecksumAddress=function(e,r){(0,u.assertIsHexString)(e);const n=(0,d.stripHexPrefix)(e).toLowerCase();let s="";if(r!==undefined){s=(0,o.bufferToBigInt)((0,o.toBuffer)(r)).toString()+"0x"}const c=t.from(s+n,"utf8"),h=(0,a.bytesToHex)((0,i.keccak256)(c));let l="0x";for(let e=0;e<n.length;e++)parseInt(h[e],16)>=8?l+=n[e].toUpperCase():l+=n[e];return l};r.isValidChecksumAddress=function(e,t){return(0,r.isValidAddress)(e)&&(0,r.toChecksumAddress)(e,t)===e};r.generateAddress=function(e,r){return(0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,o.bufferToBigInt)(r)===BigInt(0)?t.from((0,i.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,null])))).slice(-20):t.from((0,i.keccak256)(n.RLP.encode((0,o.bufArrToArr)([e,r])))).slice(-20)};r.generateAddress2=function(e,r,n){if((0,u.assertIsBuffer)(e),(0,u.assertIsBuffer)(r),(0,u.assertIsBuffer)(n),20!==e.length)throw new Error("Expected from to be of length 20");if(32!==r.length)throw new Error("Expected salt to be of length 32");const s=(0,i.keccak256)(t.concat([t.from("ff","hex"),e,r,(0,i.keccak256)(n)]));return(0,o.toBuffer)(s).slice(-20)};r.isValidPrivate=function(e){return s.secp256k1.utils.isValidPrivateKey(e)};r.isValidPublic=function(e,r=!1){if((0,u.assertIsBuffer)(e),64===e.length)try{return s.secp256k1.ProjectivePoint.fromHex(t.concat([t.from([4]),e])),!0}catch(e){return!1}if(!r)return!1;try{return s.secp256k1.ProjectivePoint.fromHex(e),!0}catch(e){return!1}};r.pubToAddress=function(e,r=!1){if((0,u.assertIsBuffer)(e),r&&64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),64!==e.length)throw new Error("Expected pubKey to be of length 64");return t.from((0,i.keccak256)(e)).slice(-20)},r.publicToAddress=r.pubToAddress;r.privateToPublic=function(e){return(0,u.assertIsBuffer)(e),t.from(s.secp256k1.ProjectivePoint.fromPrivateKey(e).toRawBytes(!1).slice(1))};r.privateToAddress=function(e){return(0,r.publicToAddress)((0,r.privateToPublic)(e))};r.importPublic=function(e){return(0,u.assertIsBuffer)(e),64!==e.length&&(e=t.from(s.secp256k1.ProjectivePoint.fromHex(e).toRawBytes(!1).slice(1))),e};r.zeroAddress=function(){const e=(0,o.zeros)(20);return(0,o.bufferToHex)(e)};function f(e){const[t,r,n,i]=e;return[t,r,0===(0,o.arrToBufArr)(n).length?c.KECCAK256_RLP:n,0===(0,o.arrToBufArr)(i).length?c.KECCAK256_NULL:i]}r.isZeroAddress=function(e){try{(0,u.assertIsString)(e)}catch(e){return!1}return(0,r.zeroAddress)()===e},r.accountBodyFromSlim=f;const p=new Uint8Array(0);r.accountBodyToSlim=function(e){const[t,r,n,i]=e;return[t,r,(0,o.arrToBufArr)(n).equals(c.KECCAK256_RLP)?p:n,(0,o.arrToBufArr)(i).equals(c.KECCAK256_NULL)?p:i]},r.accountBodyToRLP=function(e,t=!0){const r=t?f(e):e;return(0,o.arrToBufArr)(n.RLP.encode(r))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/account.js"}],[607,{"./account":606,"./bytes":609,buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Address=void 0;const n=e("./account"),i=e("./bytes");class s{constructor(e){if(20!==e.length)throw new Error("Invalid address length");this.buf=e}static zero(){return new s((0,i.zeros)(20))}static fromString(e){if(!(0,n.isValidAddress)(e))throw new Error("Invalid address");return new s((0,i.toBuffer)(e))}static fromPublicKey(e){if(!t.isBuffer(e))throw new Error("Public key should be Buffer");const r=(0,n.pubToAddress)(e);return new s(r)}static fromPrivateKey(e){if(!t.isBuffer(e))throw new Error("Private key should be Buffer");const r=(0,n.privateToAddress)(e);return new s(r)}static generate(e,t){if("bigint"!=typeof t)throw new Error("Expected nonce to be a bigint");return new s((0,n.generateAddress)(e.buf,(0,i.bigIntToBuffer)(t)))}static generate2(e,r,i){if(!t.isBuffer(r))throw new Error("Expected salt to be a Buffer");if(!t.isBuffer(i))throw new Error("Expected initCode to be a Buffer");return new s((0,n.generateAddress2)(e.buf,r,i))}equals(e){return this.buf.equals(e.buf)}isZero(){return this.equals(s.zero())}isPrecompileOrSystemAddress(){const e=(0,i.bufferToBigInt)(this.buf),t=BigInt(0),r=BigInt("0xffff");return e>=t&&e<=r}toString(){return"0x"+this.buf.toString("hex")}toBuffer(){return t.from(this.buf)}}r.Address=s}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/address.js"}],[608,{events:4323},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.AsyncEventEmitter=void 0;const n=e("events");class i extends n.EventEmitter{emit(e,...t){let[r,n]=t;const i=this;let s=i._events[e]??[];return n===undefined&&"function"==typeof r&&(n=r,r=undefined),"newListener"!==e&&"removeListener"!==e||(r={event:r,fn:n},n=undefined),s=Array.isArray(s)?s:[s],async function(e,t,r){let n;for await(const i of t)try{i.length<2?i.call(e,r):await new Promise(((t,n)=>{i.call(e,r,(e=>{e?n(e):t()}))}))}catch(e){n=e}if(n)throw n}(i,s.slice(),r).then(n).catch(n),i.listenerCount(e)>0}once(e,t){const r=this;let n;if("function"!=typeof t)throw new TypeError("listener must be a function");return n=t.length>=2?function(i,s){r.removeListener(e,n),t(i,s)}:function(i){r.removeListener(e,n),t(i,n)},r.on(e,n),r}first(e,t){let r=this._events[e]??[];if("function"!=typeof t)throw new TypeError("listener must be a function");return Array.isArray(r)||(this._events[e]=r=[r]),r.unshift(t),this}before(e,t,r){return this.beforeOrAfter(e,t,r)}after(e,t,r){return this.beforeOrAfter(e,t,r,"after")}beforeOrAfter(e,t,r,n){let i,s,a=this._events[e]??[];const o="after"===n?1:0;if("function"!=typeof r)throw new TypeError("listener must be a function");if("function"!=typeof t)throw new TypeError("target must be a function");for(Array.isArray(a)||(this._events[e]=a=[a]),s=a.length,i=a.length;i--;)if(a[i]===t){s=i+o;break}return a.splice(s,0,r),this}on(e,t){return super.on(e,t)}addListener(e,t){return super.addListener(e,t)}prependListener(e,t){return super.prependListener(e,t)}prependOnceListener(e,t){return super.prependOnceListener(e,t)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,t){return super.removeListener(e,t)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}}r.AsyncEventEmitter=i}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/asyncEventEmitter.js"}],[609,{"./helpers":612,"./internal":614,buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.intToUnpaddedBuffer=r.bigIntToUnpaddedBuffer=r.bigIntToHex=r.bufArrToArr=r.arrToBufArr=r.validateNoLeadingZeroes=r.baToJSON=r.toUtf8=r.short=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToInt=r.bigIntToBuffer=r.bufferToBigInt=r.bufferToHex=r.toBuffer=r.unpadHexString=r.unpadArray=r.unpadBuffer=r.setLengthRight=r.setLengthLeft=r.zeros=r.intToBuffer=r.intToHex=void 0;const n=e("./helpers"),i=e("./internal");r.intToHex=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`};r.intToBuffer=function(e){const n=(0,r.intToHex)(e);return t.from((0,i.padToEven)(n.slice(2)),"hex")};r.zeros=function(e){return t.allocUnsafe(e).fill(0)};const s=function(e,t,n){const i=(0,r.zeros)(t);return n?e.length<t?(e.copy(i),i):e.slice(0,t):e.length<t?(e.copy(i,t-e.length),i):e.slice(-t)};r.setLengthLeft=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!1)};r.setLengthRight=function(e,t){return(0,n.assertIsBuffer)(e),s(e,t,!0)};const a=function(e){let t=e[0];for(;e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e};r.unpadBuffer=function(e){return(0,n.assertIsBuffer)(e),a(e)};r.unpadArray=function(e){return(0,n.assertIsArray)(e),a(e)};r.unpadHexString=function(e){return(0,n.assertIsHexString)(e),e=(0,i.stripHexPrefix)(e),"0x"+a(e)};r.toBuffer=function(e){if(null===e||e===undefined)return t.allocUnsafe(0);if(t.isBuffer(e))return t.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return t.from(e);if("string"==typeof e){if(!(0,i.isHexString)(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return t.from((0,i.padToEven)((0,i.stripHexPrefix)(e)),"hex")}if("number"==typeof e)return(0,r.intToBuffer)(e);if("bigint"==typeof e){if(e<BigInt(0))throw new Error(`Cannot convert negative bigint to buffer. Given: ${e}`);let r=e.toString(16);return r.length%2&&(r="0"+r),t.from(r,"hex")}if(e.toArray)return t.from(e.toArray());if(e.toBuffer)return t.from(e.toBuffer());throw new Error("invalid type")};function o(e){const t=(0,r.bufferToHex)(e);return"0x"===t?BigInt(0):BigInt(t)}function c(e){return(0,r.toBuffer)("0x"+e.toString(16))}r.bufferToHex=function(e){return"0x"+(e=(0,r.toBuffer)(e)).toString("hex")},r.bufferToBigInt=o,r.bigIntToBuffer=c;r.bufferToInt=function(e){const t=Number(o(e));if(!Number.isSafeInteger(t))throw new Error("Number exceeds 53 bits");return t};r.fromSigned=function(e){return BigInt.asIntN(256,o(e))};r.toUnsigned=function(e){return c(BigInt.asUintN(256,e))};r.addHexPrefix=function(e){return"string"!=typeof e||(0,i.isHexPrefixed)(e)?e:"0x"+e},r.short=function(e,r=50){const n=t.isBuffer(e)?e.toString("hex"):e;return n.length<=r?n:n.slice(0,r)+"…"};r.toUtf8=function(e){if((e=(0,i.stripHexPrefix)(e)).length%2!=0)throw new Error("Invalid non-even hex string input for toUtf8() provided");return t.from(e.replace(/^(00)+|(00)+$/g,""),"hex").toString("utf8")};r.baToJSON=function(e){if(t.isBuffer(e))return`0x${e.toString("hex")}`;if(e instanceof Array){const t=[];for(let n=0;n<e.length;n++)t.push((0,r.baToJSON)(e[n]));return t}};r.validateNoLeadingZeroes=function(e){for(const[t,r]of Object.entries(e))if(r!==undefined&&r.length>0&&0===r[0])throw new Error(`${t} cannot have leading zeroes, received: ${r.toString("hex")}`)},r.arrToBufArr=function e(r){return Array.isArray(r)?r.map((t=>e(t))):t.from(r)},r.bufArrToArr=function e(t){return Array.isArray(t)?t.map((t=>e(t))):Uint8Array.from(t??[])};r.bigIntToHex=e=>"0x"+e.toString(16),r.bigIntToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)(c(e))},r.intToUnpaddedBuffer=function(e){return(0,r.unpadBuffer)((0,r.intToBuffer)(e))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/bytes.js"}],[61,{"../../../shared/constants/app":5643,"../../../shared/constants/keyring":5651,"../../../shared/constants/metametrics":5654,"@metamask/base-controller":1332,"@metamask/message-manager":1963,loglevel:4787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("loglevel"))&&n.__esModule?n:{default:n},s=e("@metamask/message-manager"),a=e("@metamask/base-controller"),o=e("../../../shared/constants/metametrics"),c=e("../../../shared/constants/keyring"),u=e("../../../shared/constants/app");function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h="EncryptionPublicKeyManager",l={unapprovedEncryptionPublicKeyMsgs:{persist:!1,anonymous:!1},unapprovedEncryptionPublicKeyMsgCount:{persist:!1,anonymous:!1}};class f extends a.BaseController{constructor({messenger:e,managerMessenger:t,getEncryptionPublicKey:r,getAccountKeyringType:n,getState:i,metricsEvent:a}){super({name:"EncryptionPublicKeyController",metadata:l,messenger:e,state:{unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0}}),d(this,"_getEncryptionPublicKey",void 0),d(this,"_getAccountKeyringType",void 0),d(this,"_getState",void 0),d(this,"_encryptionPublicKeyManager",void 0),d(this,"_metricsEvent",void 0),this._getEncryptionPublicKey=r,this._getAccountKeyringType=n,this._getState=i,this._metricsEvent=a,this._encryptionPublicKeyManager=new s.EncryptionPublicKeyManager({additionalFinishStatuses:["received"],messenger:t}),this.messagingSystem.subscribe(`${h}:unapprovedMessage`,this._requestApproval.bind(this)),this._subscribeToMessageState(e,((e,t,r)=>{e.unapprovedEncryptionPublicKeyMsgs=t,e.unapprovedEncryptionPublicKeyMsgCount=r}))}get unapprovedMsgCount(){return this._encryptionPublicKeyManager.getUnapprovedMessagesCount()}resetState(){this.update((()=>({unapprovedEncryptionPublicKeyMsgs:{},unapprovedEncryptionPublicKeyMsgCount:0})))}async newRequestEncryptionPublicKey(e,t){switch(await this._getAccountKeyringType(e)){case c.KeyringType.ledger:return new Promise(((e,t)=>{t(new Error("Ledger does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.trezor:return new Promise(((e,t)=>{t(new Error("Trezor does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.lattice:return new Promise(((e,t)=>{t(new Error("Lattice does not support eth_getEncryptionPublicKey."))}));case c.KeyringType.qr:return Promise.reject(new Error("QR hardware does not support eth_getEncryptionPublicKey."));default:return this._encryptionPublicKeyManager.addUnapprovedMessageAsync({from:e},t)}}async encryptionPublicKey(e){i.default.info("MetaMaskController - encryptionPublicKey");const t=e.metamaskId;try{const r=await this._encryptionPublicKeyManager.approveMessage(e),n=await this._getEncryptionPublicKey(r.from);return this._encryptionPublicKeyManager.setMessageStatusAndResult(t,n,"received"),this._acceptApproval(t),this._getState()}catch(e){throw i.default.info("MetaMaskController - eth_getEncryptionPublicKey failed.",e),this._cancelAbstractMessage(this._encryptionPublicKeyManager,t),e}}cancelEncryptionPublicKey(e){return this._cancelAbstractMessage(this._encryptionPublicKeyManager,e)}rejectUnapproved(e){Object.keys(this._encryptionPublicKeyManager.getUnapprovedMessages()).forEach((t=>{this._cancelAbstractMessage(this._encryptionPublicKeyManager,t,e)}))}clearUnapproved(){this._encryptionPublicKeyManager.clearUnapprovedMessages()}_cancelAbstractMessage(e,t,r){return r&&this._metricsEvent({event:r,category:o.MetaMetricsEventCategory.Messages,properties:{action:"Encryption public key Request"}}),e.rejectMessage(t),this._rejectApproval(t),this._getState()}_subscribeToMessageState(e,t){e.subscribe(`${h}:stateChange`,(e=>{const r=this._migrateMessages(e.unapprovedMessages);this.update((n=>{t(n,r,e.unapprovedMessagesCount)}))}))}_migrateMessages(e){const t={};for(const r of Object.keys(e)){const n=e[r],i=this._migrateMessage(n);t[r]=i}return t}_migrateMessage(e){const{messageParams:t,...r}=e;return{...r,rawSig:e.rawSig,msgParams:t.from,origin:t.origin}}_requestApproval(e){const t=e.metamaskId,r=e.origin||u.ORIGIN_METAMASK;this.messagingSystem.call("ApprovalController:addRequest",{id:t,origin:r,type:"eth_getEncryptionPublicKey"},!0).catch((()=>{}))}_acceptApproval(e){this.messagingSystem.call("ApprovalController:acceptRequest",e)}_rejectApproval(e){this.messagingSystem.call("ApprovalController:rejectRequest",e,"Cancel")}}r.default=f}}},{package:"$root$",file:"app/scripts/controllers/encryption-public-key.ts"}],[610,{buffer:3998,"ethereum-cryptography/secp256k1":4241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MAX_WITHDRAWALS_PER_PAYLOAD=r.RLP_EMPTY_STRING=r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.SECP256K1_ORDER_DIV_2=r.SECP256K1_ORDER=r.MAX_INTEGER_BIGINT=r.MAX_INTEGER=r.MAX_UINT64=void 0;const n=e("buffer"),i=e("ethereum-cryptography/secp256k1");r.MAX_UINT64=BigInt("0xffffffffffffffff"),r.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),r.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935"),r.SECP256K1_ORDER=i.secp256k1.CURVE.n,r.SECP256K1_ORDER_DIV_2=i.secp256k1.CURVE.n/BigInt(2),r.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=n.Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=n.Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=n.Buffer.from(r.KECCAK256_RLP_S,"hex"),r.RLP_EMPTY_STRING=n.Buffer.from([128]),r.MAX_WITHDRAWALS_PER_PAYLOAD=16}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/constants.js"}],[611,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.compactBytesToNibbles=r.bytesToNibbles=r.nibblesToCompactBytes=r.nibblesToBytes=r.hasTerminator=void 0;r.hasTerminator=e=>e.length>0&&16===e[e.length-1];r.nibblesToBytes=(e,t)=>{for(let r=0,n=0;n<e.length;r+=1,n+=2)t[r]=e[n]<<4|e[n+1]};r.nibblesToCompactBytes=e=>{let t=0;(0,r.hasTerminator)(e)&&(t=1,e=e.subarray(0,e.length-1));const n=new Uint8Array(e.length/2+1);return n[0]=t<<5,1&~e.length||(n[0]|=16,n[0]|=e[0],e=e.subarray(1)),(0,r.nibblesToBytes)(e,n.subarray(1)),n};r.bytesToNibbles=e=>{const t=2*e.length+1,r=new Uint8Array(t);for(let t=0;t<e.length;t++){const n=e[t];r[2*t]=n/16,r[2*t+1]=n%16}return r[t-1]=16,r};r.compactBytesToNibbles=e=>{if(0===e.length)return e;let t=(0,r.bytesToNibbles)(e);t[0]<2&&(t=t.subarray(0,t.length-1));const n=2-(1&t[0]);return t.subarray(n)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/encoding.js"}],[612,{"../../../../../../is-buffer/index.js":4581,"./internal":614},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.assertIsString=r.assertIsArray=r.assertIsBuffer=r.assertIsHexString=void 0;const n=e("./internal");r.assertIsHexString=function(e){if(!(0,n.isHexString)(e)){throw new Error(`This method only supports 0x-prefixed hex strings but input was: ${e}`)}};r.assertIsBuffer=function(e){if(!t.isBuffer(e)){throw new Error(`This method only supports Buffer but input was: ${e}`)}};r.assertIsArray=function(e){if(!Array.isArray(e)){throw new Error(`This method only supports number arrays but input was: ${e}`)}};r.assertIsString=function(e){if("string"!=typeof e){throw new Error(`This method only supports strings but input was: ${e}`)}}}).call(this)}).call(this,{isBuffer:e("../../../../../../is-buffer/index.js")})}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/helpers.js"}],[613,{"./account":606,"./address":607,"./asyncEventEmitter":608,"./bytes":609,"./constants":610,"./encoding":611,"./internal":614,"./lock":615,"./provider":616,"./signature":617,"./types":618,"./units":619,"./withdrawal":620},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){n===undefined&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){n===undefined&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.toAscii=r.stripHexPrefix=r.padToEven=r.isHexString=r.isHexPrefixed=r.getKeys=r.getBinarySize=r.fromUtf8=r.fromAscii=r.arrayContainsArray=void 0,i(e("./constants"),r),i(e("./units"),r),i(e("./account"),r),i(e("./address"),r),i(e("./withdrawal"),r),i(e("./signature"),r),i(e("./bytes"),r),i(e("./types"),r),i(e("./encoding"),r),i(e("./asyncEventEmitter"),r);var s=e("./internal");Object.defineProperty(r,"arrayContainsArray",{enumerable:!0,get:function(){return s.arrayContainsArray}}),Object.defineProperty(r,"fromAscii",{enumerable:!0,get:function(){return s.fromAscii}}),Object.defineProperty(r,"fromUtf8",{enumerable:!0,get:function(){return s.fromUtf8}}),Object.defineProperty(r,"getBinarySize",{enumerable:!0,get:function(){return s.getBinarySize}}),Object.defineProperty(r,"getKeys",{enumerable:!0,get:function(){return s.getKeys}}),Object.defineProperty(r,"isHexPrefixed",{enumerable:!0,get:function(){return s.isHexPrefixed}}),Object.defineProperty(r,"isHexString",{enumerable:!0,get:function(){return s.isHexString}}),Object.defineProperty(r,"padToEven",{enumerable:!0,get:function(){return s.padToEven}}),Object.defineProperty(r,"stripHexPrefix",{enumerable:!0,get:function(){return s.stripHexPrefix}}),Object.defineProperty(r,"toAscii",{enumerable:!0,get:function(){return s.toAscii}}),i(e("./lock"),r),i(e("./provider"),r)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/index.js"}],[614,{buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(e){(function(){function t(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}Object.defineProperty(r,"__esModule",{value:!0}),r.isHexString=r.getKeys=r.fromAscii=r.fromUtf8=r.toAscii=r.arrayContainsArray=r.getBinarySize=r.padToEven=r.stripHexPrefix=r.isHexPrefixed=void 0,r.isHexPrefixed=t;function n(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}r.stripHexPrefix=e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return t(e)?e.slice(2):e},r.padToEven=n,r.getBinarySize=function(t){if("string"!=typeof t)throw new Error("[getBinarySize] method requires input type 'string', received "+typeof t);return e.byteLength(t,"utf8")},r.arrayContainsArray=function(e,t,r){if(!0!==Array.isArray(e))throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof e}'`);if(!0!==Array.isArray(t))throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof t}'`);return t[!0===r?"some":"every"]((t=>e.indexOf(t)>=0))},r.toAscii=function(e){let t="",r=0;const n=e.length;for("0x"===e.substring(0,2)&&(r=2);r<n;r+=2){const n=parseInt(e.substr(r,2),16);t+=String.fromCharCode(n)}return t},r.fromUtf8=function(t){return`0x${n(e.from(t,"utf8").toString("hex")).replace(/^0+|0+$/g,"")}`},r.fromAscii=function(e){let t="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r).toString(16);t+=n.length<2?`0${n}`:n}return`0x${t}`},r.getKeys=function(e,t,r){if(!Array.isArray(e))throw new Error("[getKeys] method expects input 'params' to be an array, got "+typeof e);if("string"!=typeof t)throw new Error("[getKeys] method expects input 'key' to be type 'string', got "+typeof e);const n=[];for(let i=0;i<e.length;i++){let s=e[i][t];if(!0!==r||s){if("string"!=typeof s)throw new Error("invalid abi - expected type 'string', received "+typeof s)}else s="";n.push(s)}return n},r.isHexString=function(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&!(void 0!==t&&t>0&&e.length!==2+2*t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/internal.js"}],[615,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Lock=void 0;r.Lock=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise((e=>this.promiseResolverQueue.push(e)))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(1===this.permits&&this.promiseResolverQueue.length>0){this.permits-=1;const e=this.promiseResolverQueue.shift();e&&e(!0)}}}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/lock.js"}],[616,{"micro-ftch":4834},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getProvider=r.fetchFromProvider=void 0;const n=e("micro-ftch");r.fetchFromProvider=async(e,t)=>(await(0,n.default)(e,{headers:{"content-type":"application/json"},type:"json",data:{method:t.method,params:t.params,jsonrpc:"2.0",id:1}})).result;r.getProvider=e=>{if("string"==typeof e)return e;if(e?.connection?.url!==undefined)return e.connection.url;throw new Error("Must provide valid provider URL or Web3Provider")}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/provider.js"}],[617,{"./bytes":609,"./constants":610,"./helpers":612,buffer:3998,"ethereum-cryptography/keccak":4224,"ethereum-cryptography/secp256k1":4241},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.hashPersonalMessage=r.isValidSignature=r.fromRpcSig=r.toCompactSig=r.toRpcSig=r.ecrecover=r.ecsign=void 0;const n=e("ethereum-cryptography/keccak"),i=e("ethereum-cryptography/secp256k1"),s=e("./bytes"),a=e("./constants"),o=e("./helpers");function c(e,t){return e===BigInt(0)||e===BigInt(1)?e:t===undefined?e-BigInt(27):e-(t*BigInt(2)+BigInt(35))}function u(e){return e===BigInt(0)||e===BigInt(1)}r.ecsign=function(e,r,n){const s=i.secp256k1.sign(e,r),a=s.toCompactRawBytes();return{r:t.from(a.slice(0,32)),s:t.from(a.slice(32,64)),v:n===undefined?BigInt(s.recovery+27):BigInt(s.recovery+35)+BigInt(n)*BigInt(2)}};r.ecrecover=function(e,r,n,a,o){const d=t.concat([(0,s.setLengthLeft)(n,32),(0,s.setLengthLeft)(a,32)],64),h=c(r,o);if(!u(h))throw new Error("Invalid signature v value");const l=i.secp256k1.Signature.fromCompact(d).addRecoveryBit(Number(h)).recoverPublicKey(e);return t.from(l.toRawBytes(!1).slice(1))};r.toRpcSig=function(e,r,n,i){if(!u(c(e,i)))throw new Error("Invalid signature v value");return(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(n,32),(0,s.toBuffer)(e)]))};r.toCompactSig=function(e,r,n,i){if(!u(c(e,i)))throw new Error("Invalid signature v value");let a=n;return(e>BigInt(28)&&e%BigInt(2)===BigInt(1)||e===BigInt(1)||e===BigInt(28))&&(a=t.from(n),a[0]|=128),(0,s.bufferToHex)(t.concat([(0,s.setLengthLeft)(r,32),(0,s.setLengthLeft)(a,32)]))};r.fromRpcSig=function(e){const t=(0,s.toBuffer)(e);let r,n,i;if(t.length>=65)r=t.slice(0,32),n=t.slice(32,64),i=(0,s.bufferToBigInt)(t.slice(64));else{if(64!==t.length)throw new Error("Invalid signature length");r=t.slice(0,32),n=t.slice(32,64),i=BigInt((0,s.bufferToInt)(t.slice(32,33))>>7),n[0]&=127}return i<27&&(i+=BigInt(27)),{v:i,r:r,s:n}};r.isValidSignature=function(e,t,r,n=!0,i){if(32!==t.length||32!==r.length)return!1;if(!u(c(e,i)))return!1;const o=(0,s.bufferToBigInt)(t),d=(0,s.bufferToBigInt)(r);return!(o===BigInt(0)||o>=a.SECP256K1_ORDER||d===BigInt(0)||d>=a.SECP256K1_ORDER)&&!(n&&d>=a.SECP256K1_ORDER_DIV_2)};r.hashPersonalMessage=function(e){(0,o.assertIsBuffer)(e);const r=t.from(`Ethereum Signed Message:\n${e.length}`,"utf-8");return t.from((0,n.keccak256)(t.concat([r,e])))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/signature.js"}],[618,{"./bytes":609,"./internal":614},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.toType=r.TypeOutput=void 0;const n=e("./bytes"),i=e("./internal");var s;!function(e){e[e.Number=0]="Number",e[e.BigInt=1]="BigInt",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString"}(s=r.TypeOutput||(r.TypeOutput={})),r.toType=function(e,t){if(null===e)return null;if(e===undefined)return undefined;if("string"==typeof e&&!(0,i.isHexString)(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const r=(0,n.toBuffer)(e);switch(t){case s.Buffer:return r;case s.BigInt:return(0,n.bufferToBigInt)(r);case s.Number:{const e=(0,n.bufferToBigInt)(r);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(e)}case s.PrefixedHexString:return(0,n.bufferToHex)(r);default:throw new Error("unknown outputType")}}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/types.js"}],[619,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.GWEI_TO_WEI=void 0,r.GWEI_TO_WEI=BigInt(1e9)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/units.js"}],[62,{"../../../development/build/constants":361,"../../../shared/constants/alarms":5640,"../../../shared/constants/app":5643,"../../../shared/constants/keyring":5651,"../../../shared/constants/metametrics":5654,"../../../shared/constants/time":5671,"../../../shared/constants/transaction":5673,"../../../shared/modules/mv3.utils":5719,"../lib/util":183,"@metamask/base-controller":1332,"@metamask/name-controller":2093,"@metamask/utils":2874,buffer:3998,"ethereumjs-util":4251,lodash:4779,uuid:5587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.overrideAnonymousEventNames=r.getDefaultMetaMetricsControllerState=r.default=void 0;var n=e("lodash"),i=e("ethereumjs-util"),s=e("uuid"),a=e("@metamask/name-controller"),o=e("@metamask/utils"),c=e("@metamask/base-controller"),u=e("../../../shared/constants/app"),d=e("../../../shared/constants/metametrics"),h=e("../../../shared/constants/time"),l=e("../../../shared/modules/mv3.utils"),f=e("../../../shared/constants/alarms"),p=e("../lib/util"),g=e("../../../shared/constants/transaction"),y=e("../../../development/build/constants"),m=e("../../../shared/constants/keyring");function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t,r){w(e,t),t.set(e,r)}function w(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function k(e,t){return e.get(I(e,t))}function T(e,t,r){return e.set(I(e,t),r),r}function I(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const _=r.overrideAnonymousEventNames={[g.TransactionMetaMetricsEvent.added]:g.AnonymousTransactionMetaMetricsEvent.added,[g.TransactionMetaMetricsEvent.approved]:g.AnonymousTransactionMetaMetricsEvent.approved,[g.TransactionMetaMetricsEvent.finalized]:g.AnonymousTransactionMetaMetricsEvent.finalized,[g.TransactionMetaMetricsEvent.rejected]:g.AnonymousTransactionMetaMetricsEvent.rejected,[g.TransactionMetaMetricsEvent.submitted]:g.AnonymousTransactionMetaMetricsEvent.submitted,[d.MetaMetricsEventName.SignatureRequested]:d.MetaMetricsEventName.SignatureRequestedAnon,[d.MetaMetricsEventName.SignatureApproved]:d.MetaMetricsEventName.SignatureApprovedAnon,[d.MetaMetricsEventName.SignatureRejected]:d.MetaMetricsEventName.SignatureRejectedAnon},E=e=>{setTimeout((()=>{throw e}))},C=e=>{const t=[];return e.uniqueIdentifier&&t.push(e.uniqueIdentifier),e.actionId&&t.push(e.actionId),t.length&&e.isDuplicateAnonymizedEvent&&t.push("0x000"),t.length?t.join("-"):(0,p.generateRandomId)()},S={'You must pass either an "anonymousId" or a "userId".':!0},A={metaMetricsId:{persist:!0,anonymous:!0},participateInMetaMetrics:{persist:!0,anonymous:!0},latestNonAnonymousEventTimestamp:{persist:!0,anonymous:!0},fragments:{persist:!0,anonymous:!1},eventsBeforeMetricsOptIn:{persist:!0,anonymous:!1},traits:{persist:!0,anonymous:!1},dataCollectionForMarketing:{persist:!0,anonymous:!1},marketingCampaignCookieId:{persist:!0,anonymous:!0},segmentApiCalls:{persist:!0,anonymous:!1}},D=()=>({participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],traits:{},fragments:{},segmentApiCalls:{}});r.getDefaultMetaMetricsControllerState=D;var M=new WeakMap,P=new WeakMap,O=new WeakMap,R=new WeakMap,x=new WeakSet,B=new WeakMap;class N extends c.BaseController{constructor({state:e={},messenger:t,segment:r,version:i,environment:s,extension:a,captureException:c=E}){var u,d;super({name:"MetaMetricsController",metadata:A,state:{participateInMetaMetrics:null,metaMetricsId:null,dataCollectionForMarketing:null,marketingCampaignCookieId:null,latestNonAnonymousEventTimestamp:0,eventsBeforeMetricsOptIn:[],traits:{},fragments:{},segmentApiCalls:{},...e},messenger:t}),w(u=this,d=x),d.add(u),v(this,M,void 0),b(this,"chainId",void 0),b(this,"locale",void 0),b(this,"previousUserTraits",void 0),b(this,"version",void 0),v(this,P,void 0),v(this,O,void 0),v(this,R,void 0),v(this,B,(0,n.memoize)(((e={})=>Object.values(e).reduce(((e,t)=>e.concat(...Object.values(t))),[])))),T(M,this,(e=>{const t=(0,o.getErrorMessage)(e);S[t]||c(e)})),this.chainId=I(x,this,j).call(this);const g=this.messagingSystem.call("PreferencesController:getState");this.locale=g.currentLocale.replace("_","-"),this.version="production"===s?i:`${i}-${s}`,T(P,this,a),T(O,this,s);const y=(0,n.omitBy)(e.fragments,"persist");this.messagingSystem.subscribe("PreferencesController:stateChange",(({currentLocale:e})=>{this.locale=null==e?void 0:e.replace("_","-")})),this.messagingSystem.subscribe("NetworkController:networkDidChange",(({selectedNetworkClientId:e})=>{this.chainId=I(x,this,j).call(this,e)})),T(R,this,r),Object.values(y).forEach((e=>{this.processAbandonedFragment(e)})),l.isManifestV3&&Object.values(e.segmentApiCalls||{}).forEach((({eventType:e,payload:t})=>{try{I(x,this,J).call(this,e,t)}catch(e){k(M,this).call(this,e)}})),l.isManifestV3?(k(P,this).alarms.getAll().then((e=>{(0,p.checkAlarmExists)(e,f.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM)||k(P,this).alarms.create(f.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM,{delayInMinutes:1,periodInMinutes:1})})),k(P,this).alarms.onAlarm.addListener((e=>{e.name===f.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM&&this.finalizeAbandonedFragments()}))):setInterval((()=>{this.finalizeAbandonedFragments()}),30*h.SECOND)}finalizeAbandonedFragments(){Object.values(this.state.fragments).forEach((e=>{e.timeout&&e.lastUpdated&&Date.now()-e.lastUpdated/1e3>e.timeout&&this.processAbandonedFragment(e)}))}generateMetaMetricsId(){return(0,i.bufferToHex)((0,i.keccak)(t.from(String(Date.now())+String(Math.round(Math.random()*Number.MAX_SAFE_INTEGER)))))}createEventFragment(e){if(!e.successEvent||!e.category)throw new Error(`Must specify success event and category. Success event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`);const{fragments:t}=this.state,r=e.uniqueIdentifier??(0,s.v4)(),i={id:r,...e,lastUpdated:Date.now()},a=e.initialEvent===g.TransactionMetaMetricsEvent.submitted&&t[r]?{...t[r],canDeleteIfAbandoned:!1}:{};return this.update((e=>{e.fragments[r]=(0,n.merge)({},a,i)})),i.initialEvent&&this.trackEvent({event:i.initialEvent,category:i.category,properties:i.properties,sensitiveProperties:i.sensitiveProperties,page:i.page,referrer:i.referrer,revenue:i.revenue,value:i.value,currency:i.currency,environmentType:i.environmentType,actionId:e.actionId,uniqueIdentifier:e.uniqueIdentifier}),i}getEventFragmentById(e){return this.state.fragments[e]}processAbandonedFragment(e){e.canDeleteIfAbandoned?this.deleteEventFragment(e.id):this.finalizeEventFragment(e.id,{abandoned:!0})}updateEventFragment(e,t){const{fragments:r}=this.state,i=r[e];if(!i&&e.includes("transaction-submitted-"))this.update((r=>{r.fragments[e]={canDeleteIfAbandoned:!0,category:d.MetaMetricsEventCategory.Transactions,successEvent:g.TransactionMetaMetricsEvent.finalized,id:e,...t,lastUpdated:Date.now()}}));else{if(!i)throw new Error(`Event fragment with id ${e} does not exist.`);this.update((r=>{r.fragments[e]=(0,n.merge)(r.fragments[e],{...t,lastUpdated:Date.now()})}))}}deleteEventFragment(e){this.state.fragments[e]&&this.update((t=>{delete t.fragments[e]}))}finalizeEventFragment(e,{abandoned:t=!1,page:r,referrer:n}={}){const i=this.state.fragments[e];if(!i)throw new Error(`Funnel with id ${e} does not exist.`);const s=t?i.failureEvent:i.successEvent;this.trackEvent({event:s??"",category:i.category,properties:i.properties,sensitiveProperties:i.sensitiveProperties,page:r??i.page,referrer:i.referrer??n,revenue:i.revenue,value:i.value,currency:i.currency,environmentType:i.environmentType,actionId:i.actionId,uniqueIdentifier:i.uniqueIdentifier?`${i.uniqueIdentifier}-${t?"failure":"success"}`:undefined}),this.update((t=>{delete t.fragments[e]}))}identify(e){const{metaMetricsId:t,participateInMetaMetrics:r}=this.state;if(!r||!t||!e)return;if("object"!=typeof e)return void console.warn("MetaMetricsController#identify: userTraits parameter must be an object. Received type: "+typeof e);const n=I(x,this,U).call(this,e);I(x,this,z).call(this,n)}updateExtensionUninstallUrl(e,r){const n={av:this.version};e&&(n.mmi=t.from(r).toString("base64"),n.env=k(O,this));const i=new URLSearchParams(n);k(P,this)&&k(P,this).runtime&&k(P,this).runtime.setUninstallURL(`https://metamask.io/uninstalled?${i}`)}async setParticipateInMetaMetrics(e){const{metaMetricsId:t}=this.state,r=e&&!t?this.generateMetaMetricsId():t;return this.update((t=>{t.participateInMetaMetrics=e,t.metaMetricsId=r})),e?(this.trackEventsAfterMetricsOptIn(),this.clearEventsAfterMetricsOptIn()):this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),k(O,this)!==y.ENVIRONMENT.DEVELOPMENT&&null!==r&&this.updateExtensionUninstallUrl(e,r),r}setDataCollectionForMarketing(e){const{metaMetricsId:t}=this.state;return this.update((t=>{t.dataCollectionForMarketing=e})),!e&&this.state.marketingCampaignCookieId&&this.setMarketingCampaignCookieId(null),t}setMarketingCampaignCookieId(e){this.update((t=>{t.marketingCampaignCookieId=e}))}trackPage(e,t){try{if(!1===this.state.participateInMetaMetrics)return;if(null===this.state.participateInMetaMetrics&&(null==t||!t.isOptInPath))return;const{name:r,params:n,environmentType:i,page:s,referrer:a,actionId:o}=e,{metaMetricsId:c}=this.state,u=c?"userId":"anonymousId",h=c??d.METAMETRICS_ANONYMOUS_ID;I(x,this,J).call(this,"page",{messageId:C({actionId:o}),[u]:h,name:r,properties:{params:n,locale:this.locale,chain_id:this.chainId,environment_type:i},context:I(x,this,q).call(this,a,s)})}catch(e){k(M,this).call(this,e)}}trackEvent(e,t){I(x,this,L).call(this,e),I(x,this,K).call(this,e,t).catch((e=>{k(M,this).call(this,e)}))}handleMetaMaskStateUpdate(e){const t=this._buildUserTraitsObject(e);t&&this.identify(t)}trackEventsAfterMetricsOptIn(){const{eventsBeforeMetricsOptIn:e}=this.state;e.forEach((e=>{this.trackEvent(e)}))}clearEventsAfterMetricsOptIn(){this.update((e=>{e.eventsBeforeMetricsOptIn=[]}))}addEventBeforeMetricsOptIn(e){this.update((t=>{t.eventsBeforeMetricsOptIn.push(e)}))}updateTraits(e){this.update((t=>{t.traits={...t.traits,...e}}))}getMetaMetricsId(){let{metaMetricsId:e}=this.state;return e||(e=this.generateMetaMetricsId(),this.update((t=>{t.metaMetricsId=e}))),e}_buildUserTraitsObject(e){var t,r,i;const{traits:s}=this.state,a={[d.MetaMetricsUserTrait.AddressBookEntries]:(0,n.sum)(Object.values(e.addressBook).map(n.size)),[d.MetaMetricsUserTrait.InstallDateExt]:s[d.MetaMetricsUserTrait.InstallDateExt]||"",[d.MetaMetricsUserTrait.LedgerConnectionType]:e.ledgerTransportType,[d.MetaMetricsUserTrait.NetworksAdded]:Object.values(e.networkConfigurationsByChainId).map((e=>e.chainId)),[d.MetaMetricsUserTrait.NetworksWithoutTicker]:Object.values(e.networkConfigurationsByChainId).filter((({nativeCurrency:e})=>!e)).map((({chainId:e})=>e)),[d.MetaMetricsUserTrait.NftAutodetectionEnabled]:e.useNftDetection,[d.MetaMetricsUserTrait.NumberOfAccounts]:Object.values(e.internalAccounts.accounts).length,[d.MetaMetricsUserTrait.NumberOfNftCollections]:I(x,this,H).call(this,e.allNfts),[d.MetaMetricsUserTrait.NumberOfNfts]:k(B,this).call(this,e.allNfts).length,[d.MetaMetricsUserTrait.NumberOfTokens]:I(x,this,$).call(this,e.allTokens),[d.MetaMetricsUserTrait.NumberOfHDEntropies]:I(x,this,W).call(this,e)??(null===(t=this.previousUserTraits)||void 0===t?void 0:t.number_of_hd_entropies),[d.MetaMetricsUserTrait.OpenSeaApiEnabled]:e.openSeaEnabled,[d.MetaMetricsUserTrait.ThreeBoxEnabled]:!1,[d.MetaMetricsUserTrait.Theme]:e.theme||"default",[d.MetaMetricsUserTrait.TokenDetectionEnabled]:e.useTokenDetection,[d.MetaMetricsUserTrait.ShowNativeTokenAsMainBalance]:e.ShowNativeTokenAsMainBalance,[d.MetaMetricsUserTrait.CurrentCurrency]:e.currentCurrency,[d.MetaMetricsUserTrait.SecurityProviders]:e.securityAlertsEnabled?["blockaid"]:[],[d.MetaMetricsUserTrait.PetnameAddressCount]:I(x,this,X).call(this,e),[d.MetaMetricsUserTrait.IsMetricsOptedIn]:e.participateInMetaMetrics,[d.MetaMetricsUserTrait.HasMarketingConsent]:e.dataCollectionForMarketing,[d.MetaMetricsUserTrait.TokenSortPreference]:(null===(r=e.tokenSortConfig)||void 0===r?void 0:r.key)||"",[d.MetaMetricsUserTrait.PrivacyModeEnabled]:e.preferences.privacyMode,[d.MetaMetricsUserTrait.NetworkFilterPreference]:Object.keys(e.preferences.tokenNetworkFilter||{}),[d.MetaMetricsUserTrait.ProfileId]:null===(i=e.sessionData)||void 0===i||null===(i=i.profile)||void 0===i?void 0:i.profileId};if(!this.previousUserTraits&&e.participateInMetaMetrics)return this.previousUserTraits=a,a;if(this.previousUserTraits&&!(0,n.isEqual)(this.previousUserTraits,a)){const t=(0,n.pickBy)(a,((e,t)=>{const r=this.previousUserTraits[t];return!(0,n.isEqual)(r,e)}));return e.participateInMetaMetrics&&(this.previousUserTraits=a),t}return null}}function j(e){const t=e||this.messagingSystem.call("NetworkController:getState").selectedNetworkClientId,{configuration:{chainId:r}}=this.messagingSystem.call("NetworkController:getNetworkClientById",t);return r}async function K(e,t){if(!(this.state.participateInMetaMetrics||null!=t&&t.isOptIn))return;const r=[];if(e.sensitiveProperties){if(!0===(null==t?void 0:t.excludeMetaMetricsId))throw new Error("sensitiveProperties was specified in an event payload that also set the excludeMetaMetricsId flag");const i=_[`${e.event}`],s={...e,event:i??e.event},a=(0,n.merge)({...s.sensitiveProperties},{...s.properties});r.push(I(x,this,Q).call(this,I(x,this,F).call(this,{...s,properties:a,isDuplicateAnonymizedEvent:!0}),{...t,excludeMetaMetricsId:!0}))}r.push(I(x,this,Q).call(this,I(x,this,F).call(this,e),t)),await Promise.all(r)}function L(e){if(!e.event||!e.category)throw new Error(`Must specify event and category. Event was: ${e.event}. Category was: ${e.category}. Payload keys were: ${Object.keys(e)}. ${"object"==typeof e.properties?`Payload property keys were: ${Object.keys(e.properties)}`:""}`)}function q(e,t=d.METAMETRICS_BACKGROUND_PAGE_OBJECT){return{app:{name:"MetaMask Extension",version:this.version},userAgent:window.navigator.userAgent,page:t,referrer:e,marketingCampaignCookieId:this.state.marketingCampaignCookieId}}function F(e){const{event:t,properties:r,revenue:i,value:s,currency:a,category:o,page:c,referrer:d,environmentType:h=u.ENVIRONMENT_TYPE_BACKGROUND}=e;return{event:t,messageId:C(e),properties:{...(0,n.omit)(r,["revenue","locale","currency","value"]),revenue:i,value:s,currency:a,category:o,locale:this.locale,chain_id:r&&"chain_id"in r&&"string"==typeof r.chain_id?r.chain_id:this.chainId,environment_type:h},context:I(x,this,q).call(this,d,c)}}function U(e){return Object.entries(e).reduce(((e,[t,r])=>I(x,this,Y).call(this,r)?{...e,[t]:r.toISOString()}:I(x,this,G).call(this,r)?{...e,[t]:r}:(console.warn(`MetaMetricsController: "${t}" value is not a valid trait type`),e)),{})}function H(e={}){const t=k(B,this).call(this,e).map((e=>e.address));return new Set(t).size}function $(e){return Object.values(e).reduce(((e,t)=>e+(0,n.sum)(Object.values(t).map(n.size))),0)}function W(e){var t;return(null===(t=e.keyrings)||void 0===t?void 0:t.filter((e=>e.type===m.KeyringType.hdKeyTree)).length)??0}function z(e){const{metaMetricsId:t}=this.state;if(e&&0!==Object.keys(e).length)try{I(x,this,J).call(this,"identify",{userId:t??undefined,traits:e})}catch(e){k(M,this).call(this,e)}else console.warn("MetaMetricsController#_identify: No userTraits found")}function G(e){const t=typeof e;return"string"===t||"boolean"===t||"number"===t||I(x,this,V).call(this,e)||I(x,this,Y).call(this,e)}function V(e){return Array.isArray(e)&&(e.every((e=>"string"==typeof e))||e.every((e=>"boolean"==typeof e))||e.every((e=>"number"==typeof e)))}function Y(e){return"[object Date]"===Object.prototype.toString.call(e)}function Q(e,t){const{isOptIn:r,metaMetricsId:n,matomoEvent:i,flushImmediately:s}=t||{};let a="userId",c=this.state.metaMetricsId,u=(null==t?void 0:t.excludeMetaMetricsId)??!1;const h=Boolean(e.event.match(/^send|^confirm/iu));return!1!==(null==t?void 0:t.excludeMetaMetricsId)&&h&&(u=!0),u||r&&!n?(a="anonymousId",c=d.METAMETRICS_ANONYMOUS_ID):r&&n&&(c=n),e[a]=c??undefined,!0===i&&(e.properties.legacy_event=!0),new Promise(((t,r)=>{I(x,this,J).call(this,"track",e,(e=>{if(e){const t=(0,o.isErrorWithMessage)(e)?e.message:"",n=(0,o.isErrorWithStack)(e)?e.stack:undefined,i=new Error(t);return n&&(i.stack=n),r(i)}return t()})),s&&k(R,this).flush()}))}function J(e,t,r){const{metaMetricsId:n,participateInMetaMetrics:i,latestNonAnonymousEventTimestamp:s}=this.state;if(!i||!n)return;const a=t.messageId||(0,p.generateRandomId)();let o=new Date;if(t.timestamp){const e=new Date(t.timestamp);(0,p.isValidDate)(e)&&(o=e)}const c={...t,messageId:a,timestamp:o};this.update((t=>{t.latestNonAnonymousEventTimestamp=c.anonymousId===d.METAMETRICS_ANONYMOUS_ID?s:o.valueOf(),t.segmentApiCalls[a]={eventType:e,payload:{...c,timestamp:c.timestamp.toString()}}}));k(R,this)[e](c,(e=>(this.update((e=>{delete e.segmentApiCalls[a]})),null==r?void 0:r(e))))}function X(e){var t;const r=(null===(t=e.names)||void 0===t?void 0:t[a.NameType.ETHEREUM_ADDRESS])??{};return Object.keys(r).reduce(((e,t)=>{const n=r[t];return e+Object.keys(n).reduce(((e,t)=>{var r;return e+(Boolean(null===(r=n[t].name)||void 0===r?void 0:r.length)?1:0)}),0)}),0)}r.default=N}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"app/scripts/controllers/metametrics-controller.ts"}],[620,{"./address":607,"./bytes":609,"./types":618,buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.Withdrawal=void 0;const n=e("./address"),i=e("./bytes"),s=e("./types");class a{constructor(e,t,r,n){this.index=e,this.validatorIndex=t,this.address=r,this.amount=n}static fromWithdrawalData(e){const{index:t,validatorIndex:r,address:i,amount:o}=e,c=(0,s.toType)(t,s.TypeOutput.BigInt),u=(0,s.toType)(r,s.TypeOutput.BigInt),d=new n.Address((0,s.toType)(i,s.TypeOutput.Buffer)),h=(0,s.toType)(o,s.TypeOutput.BigInt);return new a(c,u,d,h)}static fromValuesArray(e){if(4!==e.length)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);const[t,r,n,i]=e;return a.fromWithdrawalData({index:t,validatorIndex:r,address:n,amount:i})}static toBufferArray(e){const{index:r,validatorIndex:i,address:a,amount:o}=e,c=(0,s.toType)(r,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(r,s.TypeOutput.Buffer),u=(0,s.toType)(i,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(i,s.TypeOutput.Buffer);let d;d=a instanceof n.Address?a.buf:(0,s.toType)(a,s.TypeOutput.Buffer);return[c,u,d,(0,s.toType)(o,s.TypeOutput.BigInt)===BigInt(0)?t.alloc(0):(0,s.toType)(o,s.TypeOutput.Buffer)]}raw(){return a.toBufferArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.buf,amount:this.amount}}toJSON(){return{index:(0,i.bigIntToHex)(this.index),validatorIndex:(0,i.bigIntToHex)(this.validatorIndex),address:"0x"+this.address.buf.toString("hex"),amount:(0,i.bigIntToHex)(this.amount)}}}r.Withdrawal=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@ethereumjs/util",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@ethereumjs/util/dist/withdrawal.js"}],[621,{"@ethereumjs/util":613,"@keystonehq/bc-ur-registry":643,buffer:3998,hdkey:4556,uuid:5587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("@keystonehq/bc-ur-registry"),s=e("uuid"),a=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,o=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new i.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new i.RegistryType("eth-signature",402),ETH_NFT_ITEM:new i.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=i.extend;var h,l;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(h||(h={})),(l=r.DataType||(r.DataType={}))[l.transaction=1]="transaction",l[l.typedData=2]="typedData",l[l.personalMessage=3]="personalMessage",l[l.typedTransaction=4]="typedTransaction";class f extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[h.requestId]=new i.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[h.address]=this.address),this.chainId&&(e[h.chainId]=Number(this.chainId)),this.origin&&(e[h.origin]=this.origin),e[h.signData]=this.signData,e[h.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[h.derivationPath]=t,new i.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,r,n,a,o,c,u,d){const h=n.replace(/[m|M]\//,"").split("/"),l=new i.CryptoKeypath(h.map((e=>{const t=parseInt(e.replace("'",""));let r=!1;return e.endsWith("'")&&(r=!0),new i.PathComponent({index:t,hardened:r})})),t.from(a,"hex"));return new f({requestId:o?t.from(s.parse(o)):undefined,signData:e,dataType:r,derivationPath:l,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):undefined,origin:d||undefined})}}f.fromDataItem=e=>{const t=e.getData(),r=t[h.signData],n=t[h.dataType],s=i.CryptoKeypath.fromDataItem(t[h.derivationPath]),a=t[h.chainId]?t[h.chainId]:undefined,o=t[h.address]?t[h.address]:undefined,c=t[h.requestId]?t[h.requestId].getData():undefined,u=t[h.origin]?t[h.origin]:undefined;return new f({requestId:c,signData:r,dataType:n,chainId:a,derivationPath:s,address:o,origin:u})},f.fromCBOR=e=>{const t=u(e);return f.fromDataItem(t)};const{RegistryTypes:p,decodeToDataItem:g}=i.extend;var y;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(y||(y={}));class m extends i.RegistryItem{constructor(e,t,r){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[y.requestId]=new i.DataItem(this.requestId,p.UUID.getTag())),this.origin&&(e[y.origin]=this.origin),e[y.signature]=this.signature,new i.DataItem(e)},this.signature=e,this.requestId=t,this.origin=r}}m.fromDataItem=e=>{const t=e.getData(),r=t[y.signature],n=t[y.requestId]?t[y.requestId].getData():undefined;return new m(r,n,t[y.origin])},m.fromCBOR=e=>{const t=g(e);return m.fromDataItem(t)};const{decodeToDataItem:b}=i.extend;var v;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(v||(v={}));class w extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[v.chainId]=this.chainId,e[v.name]=this.name,e[v.contractAddress]=this.contractAddress,e[v.contractName]=this.contractName,e[v.mediaData]=this.mediaData,new i.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,r,n,i){return new w({chainId:e,contractAddress:t,contractName:r,mediaData:i,name:n})}}w.fromDataItem=e=>{const t=e.getData(),r=t[v.chainId],n=t[v.name],i=t[v.mediaData],s=t[v.contractAddress],a=t[v.contractName];return new w({chainId:r,name:n,contractAddress:s,contractName:a,mediaData:i})},w.fromCBOR=e=>{const t=b(e);return w.fromDataItem(t)};const k=(e,t)=>{const r=a.fromExtendedKey(e).derive(t),n="0x"+o.publicToAddress(r.publicKey,!0).toString("hex");return o.toChecksumAddress(n)};i.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(i).forEach((function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})})),r.ETHNFTItem=w,r.ETHSignature=m,r.EthSignRequest=f,r.findHDPathFromAddress=(e,t,r,n)=>{for(let i=0;i<r;i++){const r=k(t,`M/0/${i}`);if(e.toLowerCase()==r.toLowerCase())return`${n}/0/${i}`}return null},r.generateAddressFromXpub=k}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.development.js"}],[622,{"@ethereumjs/util":613,"@keystonehq/bc-ur-registry":643,buffer:3998,hdkey:4556,uuid:5587},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0});var n,i=e("@keystonehq/bc-ur-registry"),s=e("uuid"),a=(n=e("hdkey"))&&"object"==typeof n&&"default"in n?n.default:n,o=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new i.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new i.RegistryType("eth-signature",402),ETH_NFT_ITEM:new i.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=i.extend;var h,l;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(h||(h={})),(l=r.DataType||(r.DataType={}))[l.transaction=1]="transaction",l[l.typedData=2]="typedData",l[l.personalMessage=3]="personalMessage",l[l.typedTransaction=4]="typedTransaction";class f extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[h.requestId]=new i.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[h.address]=this.address),this.chainId&&(e[h.chainId]=Number(this.chainId)),this.origin&&(e[h.origin]=this.origin),e[h.signData]=this.signData,e[h.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[h.derivationPath]=t,new i.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,r,n,a,o,c,u,d){const h=n.replace(/[m|M]\//,"").split("/"),l=new i.CryptoKeypath(h.map((e=>{const t=parseInt(e.replace("'",""));let r=!1;return e.endsWith("'")&&(r=!0),new i.PathComponent({index:t,hardened:r})})),t.from(a,"hex"));return new f({requestId:o?t.from(s.parse(o)):void 0,signData:e,dataType:r,derivationPath:l,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):void 0,origin:d||void 0})}}f.fromDataItem=e=>{const t=e.getData(),r=t[h.signData],n=t[h.dataType],s=i.CryptoKeypath.fromDataItem(t[h.derivationPath]),a=t[h.chainId]?t[h.chainId]:void 0,o=t[h.address]?t[h.address]:void 0,c=t[h.requestId]?t[h.requestId].getData():void 0;return new f({requestId:c,signData:r,dataType:n,chainId:a,derivationPath:s,address:o,origin:t[h.origin]?t[h.origin]:void 0})},f.fromCBOR=e=>{const t=u(e);return f.fromDataItem(t)};const{RegistryTypes:p,decodeToDataItem:g}=i.extend;var y;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(y||(y={}));class m extends i.RegistryItem{constructor(e,t,r){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[y.requestId]=new i.DataItem(this.requestId,p.UUID.getTag())),this.origin&&(e[y.origin]=this.origin),e[y.signature]=this.signature,new i.DataItem(e)},this.signature=e,this.requestId=t,this.origin=r}}m.fromDataItem=e=>{const t=e.getData(),r=t[y.signature],n=t[y.requestId]?t[y.requestId].getData():void 0;return new m(r,n,t[y.origin])},m.fromCBOR=e=>{const t=g(e);return m.fromDataItem(t)};const{decodeToDataItem:b}=i.extend;var v;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(v||(v={}));class w extends i.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[v.chainId]=this.chainId,e[v.name]=this.name,e[v.contractAddress]=this.contractAddress,e[v.contractName]=this.contractName,e[v.mediaData]=this.mediaData,new i.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,r,n,i){return new w({chainId:e,contractAddress:t,contractName:r,mediaData:i,name:n})}}w.fromDataItem=e=>{const t=e.getData();return new w({chainId:t[v.chainId],name:t[v.name],contractAddress:t[v.contractAddress],contractName:t[v.contractName],mediaData:t[v.mediaData]})},w.fromCBOR=e=>{const t=b(e);return w.fromDataItem(t)};const k=(e,t)=>{const r=a.fromExtendedKey(e).derive(t),n="0x"+o.publicToAddress(r.publicKey,!0).toString("hex");return o.toChecksumAddress(n)};i.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(i).forEach((function(e){"default"!==e&&Object.defineProperty(r,e,{enumerable:!0,get:function(){return i[e]}})})),r.ETHNFTItem=w,r.ETHSignature=m,r.EthSignRequest=f,r.findHDPathFromAddress=(e,t,r,n)=>{for(let i=0;i<r;i++){const r=k(t,"M/0/"+i);if(e.toLowerCase()==r.toLowerCase())return`${n}/0/${i}`}return null},r.generateAddressFromXpub=k}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/bc-ur-registry-eth.cjs.production.min.js"}],[623,{"./bc-ur-registry-eth.cjs.development.js":621,"./bc-ur-registry-eth.cjs.production.min.js":622},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry-eth/dist/index.js"}],[624,{"./RegistryItem":635,"./RegistryType":636,"./lib":646},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Bytes=void 0;const n=e("./lib"),i=e("./RegistryItem"),s=e("./RegistryType");class a extends i.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>s.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new n.DataItem(this.bytes)}}r.Bytes=a,a.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new a(t)},a.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return a.fromDataItem(t)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/Bytes.js"}],[625,{".":643,"./RegistryItem":635,"./RegistryType":636,"./lib":646,buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoAccount=void 0;const n=e("."),i=e("./lib"),s=e("./RegistryItem"),a=e("./RegistryType");var o;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(o||(o={}));class c extends s.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>a.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[o.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[o.outputDescriptors]=this.outputDescriptors.map((e=>e.toDataItem()))),new i.DataItem(e)}}}r.CryptoAccount=c,c.fromDataItem=e=>{const r=e.getData(),i=t.alloc(4),s=r[o.masterFingerprint];s&&i.writeUInt32BE(s,0);const a=r[o.outputDescriptors].map((e=>n.CryptoOutput.fromDataItem(e)));return new c(i,a)},c.fromCBOR=e=>{const t=(0,i.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoAccount.js"}],[626,{"./RegistryItem":635,"./RegistryType":636,"./lib":646},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoCoinInfo=r.Network=r.Type=void 0;const n=e("./lib"),i=e("./RegistryItem"),s=e("./RegistryType");var a,o,c;!function(e){e.type="1",e.network="2"}(a||(a={})),function(e){e[e.bitcoin=0]="bitcoin"}(o=r.Type||(r.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(c=r.Network||(r.Network={}));class u extends i.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||o.bitcoin,this.getNetwork=()=>this.network||c.mainnet,this.toDataItem=()=>{const e={};return this.type&&(e[a.type]=this.type),this.network&&(e[a.network]=this.network),new n.DataItem(e)}}}r.CryptoCoinInfo=u,u.fromDataItem=e=>{const t=e.getData(),r=t[a.type],n=t[a.network];return new u(r,n)},u.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoCoinInfo.js"}],[627,{"./RegistryItem":635,"./RegistryType":636,"./lib":646},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoECKey=void 0;const n=e("./lib"),i=e("./RegistryItem"),s=e("./RegistryType");var a;!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(a||(a={}));class o extends i.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const e={};return this.curve&&(e[a.curve]=this.curve),this.privateKey!==undefined&&(e[a.private]=this.privateKey),e[a.data]=this.data,new n.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||undefined}}r.CryptoECKey=o,o.fromDataItem=e=>{const t=e.getData(),r=t[a.curve],n=t[a.private],i=t[a.data];if(!i)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new o({data:i,curve:r,privateKey:n})},o.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return o.fromDataItem(t)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoECKey.js"}],[628,{"./CryptoCoinInfo":626,"./CryptoKeypath":629,"./RegistryItem":635,"./RegistryType":636,"./lib":646,bs58check:4001,buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoHDKey=void 0;const n=e("bs58check"),i=e("./CryptoCoinInfo"),s=e("./CryptoKeypath"),a=e("./lib"),o=e("./RegistryItem"),c=e("./RegistryType");var u;!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(u||(u={}));class d extends o.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,r,i;let s,a,o=0,c=t.alloc(4).fill(0);if(this.isMaster())s=t.from("0488ADE4","hex"),a=0,o=0;else{a=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(r=this.getOrigin())||void 0===r?void 0:r.getDepth());const n=null===(i=this.getOrigin())||void 0===i?void 0:i.getComponents(),u=n[n.length-1];u&&(o=u.isHardened()?u.getIndex()+2147483648:u.getIndex(),this.getParentFingerprint()&&(c=this.getParentFingerprint())),s=this.isPrivateKey()?t.from("0488ADE4","hex"):t.from("0488B21E","hex")}const u=t.alloc(1);u.writeUInt8(a,0);const d=t.alloc(4);d.writeUInt32BE(o,0);const h=this.getChainCode(),l=this.getKey();return(0,n.encode)(t.concat([s,u,c,d,h,l]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,r,n,i,s,a;let o="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(o+=`${null===(n=null===(r=this.getOrigin())||void 0===r?void 0:r.getSourceFingerprint())||void 0===n?void 0:n.toString("hex")}/${null===(i=this.getOrigin())||void 0===i?void 0:i.getPath()}`),o+=this.getBip32Key(),this.getChildren()&&(null===(s=this.getChildren())||void 0===s?void 0:s.getPath())&&(o+=`/${null===(a=this.getChildren())||void 0===a?void 0:a.getPath()}`),o},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{const e={};if(this.master)e[u.is_master]=!0,e[u.key_data]=this.key,e[u.chain_code]=this.chainCode;else{if(this.privateKey!==undefined&&(e[u.is_private]=this.privateKey),e[u.key_data]=this.key,this.chainCode&&(e[u.chain_code]=this.chainCode),this.useInfo){const t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[u.use_info]=t}if(this.origin){const t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[u.origin]=t}if(this.children){const t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[u.children]=t}this.parentFingerprint&&(e[u.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==undefined&&(e[u.name]=this.name),this.note!==undefined&&(e[u.note]=this.note)}return new a.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}r.CryptoHDKey=d,d.fromDataItem=e=>{const r=e.getData(),n=!!r[u.is_master],a=r[u.is_private],o=r[u.key_data],c=r[u.chain_code],h=r[u.use_info]?i.CryptoCoinInfo.fromDataItem(r[u.use_info]):undefined,l=r[u.origin]?s.CryptoKeypath.fromDataItem(r[u.origin]):undefined,f=r[u.children]?s.CryptoKeypath.fromDataItem(r[u.children]):undefined,p=r[u.parent_fingerprint];let g=undefined;p&&(g=t.alloc(4),g.writeUInt32BE(p,0));const y=r[u.name],m=r[u.note];return new d({isMaster:n,isPrivateKey:a,key:o,chainCode:c,useInfo:h,origin:l,children:f,parentFingerprint:g,name:y,note:m})},d.fromCBOR=e=>{const t=(0,a.decodeToDataItem)(e);return d.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoHDKey.js"}],[629,{"./PathComponent":634,"./RegistryItem":635,"./RegistryType":636,"./lib":646,buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoKeypath=void 0;const n=e("./lib"),i=e("./PathComponent"),s=e("./RegistryItem"),a=e("./RegistryType");var o;!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(o||(o={}));class c extends s.RegistryItem{constructor(e=[],t,r){super(),this.components=e,this.sourceFingerprint=t,this.depth=r,this.getRegistryType=()=>a.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0===this.components.length)return undefined;return this.components.map((e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`)).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const e={},t=[];return this.components&&this.components.forEach((e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())})),e[o.components]=t,this.sourceFingerprint&&(e[o.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==undefined&&(e[o.depth]=this.depth),new n.DataItem(e)}}}r.CryptoKeypath=c,c.fromDataItem=e=>{const r=e.getData(),n=[],s=r[o.components];if(s)for(let e=0;e<s.length;e+=2){const t=s[e+1],r=s[e];"number"==typeof r?n.push(new i.PathComponent({index:r,hardened:t})):n.push(new i.PathComponent({hardened:t}))}const a=r[o.source_fingerprint];let u;a&&(u=t.alloc(4),u.writeUInt32BE(a,0));const d=r[o.depth];return new c(n,u,d)},c.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoKeypath.js"}],[63,{"@metamask/base-controller":1332},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MetaMetricsDataDeletionController=void 0;var n=e("@metamask/base-controller");function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function s(e,t){return e.get(a(e,t))}function a(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}const o="MetaMetricsDataDeletionController",c={metaMetricsDataDeletionId:{persist:!0,anonymous:!0},metaMetricsDataDeletionTimestamp:{persist:!0,anonymous:!0},metaMetricsDataDeletionStatus:{persist:!0,anonymous:!0}};var u=new WeakMap,d=new WeakSet;class h extends n.BaseController{constructor({dataDeletionService:e,messenger:t,state:r}){var n,s;super({messenger:t,metadata:c,name:o,state:{metaMetricsDataDeletionId:null,metaMetricsDataDeletionTimestamp:0,...r}}),i(n=this,s=d),s.add(n),function(e,t,r){i(e,t),t.set(e,r)}(this,u,void 0),function(e,t,r){e.set(a(e,t),r)}(u,this,e),a(d,this,l).call(this)}async createMetaMetricsDataDeletionTask(){const{metaMetricsId:e}=this.messagingSystem.call("MetaMetricsController:getState");if(!e)throw new Error("MetaMetrics ID not found");const t=await s(u,this).createDataDeletionRegulationTask(e);this.update((e=>{e.metaMetricsDataDeletionId=t??null,e.metaMetricsDataDeletionTimestamp=Date.now()})),await this.updateDataDeletionTaskStatus()}async updateDataDeletionTaskStatus(){const e=this.state.metaMetricsDataDeletionId;if(!e)throw new Error("Delete Regulation id not found");const t=await s(u,this).fetchDeletionRegulationStatus(e);this.update((e=>{e.metaMetricsDataDeletionStatus=t??undefined}))}}function l(){this.messagingSystem.registerActionHandler(`${o}:createMetaMetricsDataDeletionTask`,this.createMetaMetricsDataDeletionTask.bind(this)),this.messagingSystem.registerActionHandler(`${o}:updateDataDeletionTaskStatus`,this.updateDataDeletionTaskStatus.bind(this))}r.MetaMetricsDataDeletionController=h}}},{package:"$root$",file:"app/scripts/controllers/metametrics-data-deletion/metametrics-data-deletion.ts"}],[630,{"./CryptoECKey":627,"./CryptoHDKey":628,"./MultiKey":633,"./RegistryItem":635,"./RegistryType":636,"./ScriptExpression":637,"./lib":646},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoOutput=void 0;const n=e("./CryptoECKey"),i=e("./CryptoHDKey"),s=e("./lib"),a=e("./MultiKey"),o=e("./RegistryItem"),c=e("./RegistryType"),u=e("./ScriptExpression");class d extends o.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>c.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof i.CryptoHDKey?this.cryptoKey:undefined,this.getECKey=()=>this.cryptoKey instanceof n.CryptoECKey?this.cryptoKey:undefined,this.getMultiKey=()=>this.cryptoKey instanceof a.MultiKey?this.cryptoKey:undefined,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();(this.cryptoKey instanceof n.CryptoECKey||this.cryptoKey instanceof i.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag());return[...this.scriptExpressions].reverse().forEach((t=>{const r=t.getTag();e.getTag()===undefined?e.setTag(r):e=new s.DataItem(e,r)})),e}}}r.CryptoOutput=d,d.fromDataItem=e=>{const t=[];let r=e;for(;;){let e=r.getTag();const n=u.ScriptExpression.fromTag(e);if(!n)break;if(t.push(n),!(r.getData()instanceof s.DataItem))break;r=r.getData(),e=r.getTag()}const o=t.length;if(o>0&&(t[o-1].getExpression()===u.ScriptExpressions.MULTISIG.getExpression()||t[o-1].getExpression()===u.ScriptExpressions.SORTED_MULTISIG.getExpression())){const e=a.MultiKey.fromDataItem(r);return new d(t,e)}if(r.getTag()===c.RegistryTypes.CRYPTO_HDKEY.getTag()){const e=i.CryptoHDKey.fromDataItem(r);return new d(t,e)}{const e=n.CryptoECKey.fromDataItem(r);return new d(t,e)}},d.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return d.fromDataItem(t)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoOutput.js"}],[631,{"./RegistryItem":635,"./RegistryType":636,"./lib":646},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoPSBT=void 0;const n=e("./lib"),i=e("./RegistryItem"),s=e("./RegistryType");class a extends i.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new n.DataItem(this.psbt)}}r.CryptoPSBT=a,a.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new a(t)},a.fromCBOR=e=>{const t=(0,n.decodeToDataItem)(e);return a.fromDataItem(t)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/CryptoPSBT.js"}],[632,{"..":643,"../RegistryType":636,"../errors":638,"@ngraveio/bc-ur":2893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.URRegistryDecoder=void 0;const n=e("@ngraveio/bc-ur"),i=e(".."),s=e("../RegistryType"),a=e("../errors");class o extends n.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const e=this.resultUR();switch(e.type){case s.RegistryTypes.BYTES.getType():return i.Bytes.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_HDKEY.getType():return i.CryptoHDKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_KEYPATH.getType():return i.CryptoKeypath.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_COIN_INFO.getType():return i.CryptoCoinInfo.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ECKEY.getType():return i.CryptoECKey.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_OUTPUT.getType():return i.CryptoOutput.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_PSBT.getType():return i.CryptoPSBT.fromCBOR(e.cbor);case s.RegistryTypes.CRYPTO_ACCOUNT.getType():return i.CryptoAccount.fromCBOR(e.cbor);default:throw new a.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}r.URRegistryDecoder=o}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/Decoder/index.js"}],[633,{"./CryptoECKey":627,"./CryptoHDKey":628,"./RegistryItem":635,"./RegistryType":636,"./lib/DataItem":644},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MultiKey=void 0;const n=e("./CryptoECKey"),i=e("./CryptoHDKey"),s=e("./lib/DataItem"),a=e("./RegistryItem"),o=e("./RegistryType");var c;!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(c||(c={}));class u extends a.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const e={};e[c.threshold]=this.threshold;const t=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}));return e[c.keys]=t,new s.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map((e=>e.getOutputDescriptorContent())).join(",")].join(",")}}r.MultiKey=u,u.fromDataItem=e=>{const t=e.getData(),r=t[c.threshold],s=t[c.keys],a=[];return s.forEach((e=>{e.getTag()===o.RegistryTypes.CRYPTO_HDKEY.getTag()?a.push(i.CryptoHDKey.fromDataItem(e)):e.getTag()===o.RegistryTypes.CRYPTO_ECKEY.getTag()&&a.push(n.CryptoECKey.fromDataItem(e))})),new u(r,a)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/MultiKey.js"}],[634,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PathComponent=void 0;class n{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,this.index!==undefined?this.wildcard=!1:this.wildcard=!0,this.index&&this.index&n.HARDENED_BIT)throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}r.PathComponent=n,n.HARDENED_BIT=2147483648}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/PathComponent.js"}],[635,{"./lib":646,"@ngraveio/bc-ur":2893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RegistryItem=void 0;const n=e("@ngraveio/bc-ur"),i=e("./lib");r.RegistryItem=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===undefined)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,i.encodeDataItem)(this.toDataItem())},this.toUR=()=>new n.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,r)=>{const i=this.toUR();return new n.UREncoder(i,e,t,r)}}}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/RegistryItem.js"}],[636,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.RegistryTypes=r.RegistryType=void 0;class n{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}r.RegistryType=n,r.RegistryTypes={UUID:new n("uuid",37),BYTES:new n("bytes",undefined),CRYPTO_HDKEY:new n("crypto-hdkey",303),CRYPTO_KEYPATH:new n("crypto-keypath",304),CRYPTO_COIN_INFO:new n("crypto-coin-info",305),CRYPTO_ECKEY:new n("crypto-eckey",306),CRYPTO_OUTPUT:new n("crypto-output",308),CRYPTO_PSBT:new n("crypto-psbt",310),CRYPTO_ACCOUNT:new n("crypto-account",311),CRYPTO_MULTI_ACCOUNTS:new n("crypto-multi-accounts",1103),QR_HARDWARE_CALL:new n("qr-hardware-call",1201),KEY_DERIVATION_CALL:new n("key-derivation-call",1301),KEY_DERIVATION_SCHEMA:new n("key-derivation-schema",1302)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/RegistryType.js"}],[637,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ScriptExpressions=r.ScriptExpression=void 0;class n{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}r.ScriptExpression=n,n.fromTag=e=>Object.values(r.ScriptExpressions).find((t=>t.getTag()===e)),r.ScriptExpressions={SCRIPT_HASH:new n(400,"sh"),WITNESS_SCRIPT_HASH:new n(401,"wsh"),PUBLIC_KEY:new n(402,"pk"),PUBLIC_KEY_HASH:new n(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new n(404,"wpkh"),COMBO:new n(405,"combo"),MULTISIG:new n(406,"multi"),SORTED_MULTISIG:new n(407,"sortedmulti"),ADDRESS:new n(307,"addr"),RAW_SCRIPT:new n(408,"raw")}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/ScriptExpression.js"}],[638,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.UnknownURTypeError=void 0;class n extends Error{constructor(e){super(e)}}r.UnknownURTypeError=n}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/errors/index.js"}],[639,{"../CryptoHDKey":628,"../RegistryItem":635,"../RegistryType":636,"../lib":646,buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.CryptoMultiAccounts=void 0;const n=e("../RegistryType"),i=e("../CryptoHDKey"),s=e("../RegistryItem"),a=e("../lib");var o;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.keys=2]="keys",e[e.device=3]="device",e[e.deviceId=4]="deviceId",e[e.version=5]="version"}(o||(o={}));class c extends s.RegistryItem{constructor(e,t,r,i,s){super(),this.masterFingerprint=e,this.keys=t,this.device=r,this.deviceId=i,this.version=s,this.getRegistryType=()=>n.RegistryTypes.CRYPTO_MULTI_ACCOUNTS,this.getMasterFingerprint=()=>this.masterFingerprint,this.getKeys=()=>this.keys,this.getDevice=()=>this.device,this.getDeviceId=()=>this.deviceId,this.getVersion=()=>this.version,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[o.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.keys&&(e[o.keys]=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}))),this.device&&(e[o.device]=this.device),this.deviceId&&(e[o.deviceId]=this.deviceId),this.version&&(e[o.version]=this.version),new a.DataItem(e)}}}r.CryptoMultiAccounts=c,c.fromDataItem=e=>{const r=e.getData(),n=t.alloc(4),s=r[o.masterFingerprint];s&&n.writeUInt32BE(s,0);const a=r[o.keys].map((e=>i.CryptoHDKey.fromDataItem(e))),u=r[o.device],d=r[o.deviceId],h=r[o.version];return new c(n,a,u,d,h)},c.fromCBOR=e=>{const t=(0,a.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/extended/CryptoMultiAccounts.js"}],[64,{"../../../shared/constants/network":5658,"@metamask/base-controller":1332,"@metamask/keyring-api":1873,"@metamask/multichain-network-controller":2021},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.NetworkOrderController=void 0;var n=e("@metamask/keyring-api"),i=e("@metamask/base-controller"),s=e("@metamask/multichain-network-controller"),a=e("../../../shared/constants/network");const o={orderedNetworkList:[]},c={orderedNetworkList:{persist:!0,anonymous:!0}};class u extends i.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:c,name:"NetworkOrderController",state:{...o,...t}}),this.messagingSystem.subscribe("NetworkController:stateChange",(e=>{this.onNetworkControllerStateChange(e)}))}onNetworkControllerStateChange({networkConfigurationsByChainId:e}){this.update((t=>{const r=Object.keys(e).filter((e=>!a.TEST_CHAINS.includes(e))).map(s.toEvmCaipChainId),i=[n.BtcScope.Mainnet,n.SolScope.Mainnet],o=r.filter((e=>!t.orderedNetworkList.some((({networkId:t})=>t===e)))).map((e=>({networkId:e})));t.orderedNetworkList=t.orderedNetworkList.filter((({networkId:e})=>r.includes(e)||i.includes(e))).concat(o)}))}updateNetworksList(e){this.update((t=>{t.orderedNetworkList=e.map((e=>({networkId:e})))}))}}r.NetworkOrderController=u}}},{package:"$root$",file:"app/scripts/controllers/network-order.ts"}],[640,{"../CryptoKeypath":629,"../RegistryItem":635,"../RegistryType":636,"../lib":646},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyDerivationSchema=r.DerivationAlgorithm=r.Curve=void 0;const n=e("../RegistryType"),i=e("../RegistryItem"),s=e("../lib"),a=e("../CryptoKeypath");var o,c,u;!function(e){e[e.keyPath=1]="keyPath",e[e.curve=2]="curve",e[e.algo=3]="algo"}(o||(o={})),function(e){e[e.secp256k1=0]="secp256k1",e[e.ed25519=1]="ed25519"}(c=r.Curve||(r.Curve={})),function(e){e[e.slip10=0]="slip10",e[e.bip32ed25519=1]="bip32ed25519"}(u=r.DerivationAlgorithm||(r.DerivationAlgorithm={}));class d extends i.RegistryItem{constructor(e,t=c.secp256k1,r=u.slip10){super(),this.keypath=e,this.curve=t,this.algo=r,this.getRegistryType=()=>n.RegistryTypes.KEY_DERIVATION_SCHEMA,this.getKeypath=()=>this.keypath,this.getCurve=()=>this.curve,this.getAlgo=()=>this.algo,this.toDataItem=()=>{const e={},t=this.getKeypath().toDataItem();return t.setTag(this.getKeypath().getRegistryType().getTag()),e[o.keyPath]=t,e[o.curve]=this.curve,e[o.algo]=this.algo,new s.DataItem(e)}}}r.KeyDerivationSchema=d,d.fromDataItem=e=>{const t=e.getData(),r=a.CryptoKeypath.fromDataItem(t[o.keyPath]),n=t[o.curve],i=t[o.algo];return new d(r,n,i)},d.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return d.fromDataItem(t)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/extended/DerivationSchema.js"}],[641,{"../RegistryItem":635,"../RegistryType":636,"../lib":646,"./DerivationSchema":640},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.KeyDerivation=void 0;const n=e("../RegistryType"),i=e("../RegistryItem"),s=e("../lib"),a=e("./DerivationSchema");var o;!function(e){e[e.schemas=1]="schemas"}(o||(o={}));class c extends i.RegistryItem{constructor(e){super(),this.schemas=e,this.getRegistryType=()=>n.RegistryTypes.KEY_DERIVATION_CALL,this.getSchemas=()=>this.schemas,this.toDataItem=()=>{const e={};return e[o.schemas]=this.schemas.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t})),new s.DataItem(e)}}}r.KeyDerivation=c,c.fromDataItem=e=>{const t=e.getData()[o.schemas].map((e=>a.KeyDerivationSchema.fromDataItem(e)));return new c(t)},c.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return c.fromDataItem(t)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/extended/KeyDerivation.js"}],[642,{"../RegistryItem":635,"../RegistryType":636,"../lib":646,"./KeyDerivation":641},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.QRHardwareCall=r.QRHardwareCallType=void 0;const n=e("../RegistryType"),i=e("../RegistryItem"),s=e("../lib"),a=e("./KeyDerivation");var o,c;!function(e){e[e.type=1]="type",e[e.params=2]="params",e[e.origin=3]="origin"}(o||(o={})),function(e){e[e.KeyDerivation=0]="KeyDerivation"}(c=r.QRHardwareCallType||(r.QRHardwareCallType={}));class u extends i.RegistryItem{constructor(e,t,r){super(),this.type=e,this.params=t,this.origin=r,this.getRegistryType=()=>n.RegistryTypes.QR_HARDWARE_CALL,this.getType=()=>this.type,this.getParams=()=>this.params,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};e[o.type]=this.type;const t=this.params.toDataItem();return t.setTag(this.params.getRegistryType().getTag()),e[o.params]=t,this.origin&&(e[o.origin]=this.origin),new s.DataItem(e)}}}r.QRHardwareCall=u,u.fromDataItem=e=>{const t=e.getData(),r=t[o.type]||c.KeyDerivation;let n;if(r===c.KeyDerivation)n=a.KeyDerivation.fromDataItem(t[o.params]);const i=t[o.origin];return new u(r,n,i)},u.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/extended/QRHardwareCall.js"}],[643,{"./Bytes":624,"./CryptoAccount":625,"./CryptoCoinInfo":626,"./CryptoECKey":627,"./CryptoHDKey":628,"./CryptoKeypath":629,"./CryptoOutput":630,"./CryptoPSBT":631,"./Decoder":632,"./MultiKey":633,"./PathComponent":634,"./RegistryItem":635,"./RegistryType":636,"./ScriptExpression":637,"./errors":638,"./extended/CryptoMultiAccounts":639,"./extended/DerivationSchema":640,"./extended/KeyDerivation":641,"./extended/QRHardwareCall":642,"./lib":646,"./patchCBOR":647,"./types":648,"./utils":649,"buffer/":4005,tslib:5539},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.extend=r.PathComponent=r.ScriptExpressions=r.MultiKey=r.CryptoPSBT=r.CryptoOutput=r.CryptoECKey=r.CryptoCoinInfoNetwork=r.CryptoCoinInfoType=r.CryptoCoinInfo=r.CryptoKeypath=r.CryptoMultiAccounts=r.CryptoHDKey=r.CryptoAccount=r.Bytes=r.URRegistryDecoder=r.DataItem=void 0;const n=e("tslib");e("./patchCBOR");const i=e("buffer/");Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return i.Buffer}});const s=e("./CryptoHDKey");Object.defineProperty(r,"CryptoHDKey",{enumerable:!0,get:function(){return s.CryptoHDKey}});const a=e("./CryptoKeypath");Object.defineProperty(r,"CryptoKeypath",{enumerable:!0,get:function(){return a.CryptoKeypath}});const o=e("./CryptoCoinInfo");Object.defineProperty(r,"CryptoCoinInfo",{enumerable:!0,get:function(){return o.CryptoCoinInfo}}),Object.defineProperty(r,"CryptoCoinInfoType",{enumerable:!0,get:function(){return o.Type}}),Object.defineProperty(r,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return o.Network}});const c=e("./CryptoECKey");Object.defineProperty(r,"CryptoECKey",{enumerable:!0,get:function(){return c.CryptoECKey}});const u=e("./Bytes");Object.defineProperty(r,"Bytes",{enumerable:!0,get:function(){return u.Bytes}});const d=e("./CryptoOutput");Object.defineProperty(r,"CryptoOutput",{enumerable:!0,get:function(){return d.CryptoOutput}});const h=e("./CryptoPSBT");Object.defineProperty(r,"CryptoPSBT",{enumerable:!0,get:function(){return h.CryptoPSBT}});const l=e("./CryptoAccount");Object.defineProperty(r,"CryptoAccount",{enumerable:!0,get:function(){return l.CryptoAccount}});const f=e("./Decoder");Object.defineProperty(r,"URRegistryDecoder",{enumerable:!0,get:function(){return f.URRegistryDecoder}});const p=e("./MultiKey");Object.defineProperty(r,"MultiKey",{enumerable:!0,get:function(){return p.MultiKey}});const g=e("./ScriptExpression");Object.defineProperty(r,"ScriptExpressions",{enumerable:!0,get:function(){return g.ScriptExpressions}});const y=e("./PathComponent");Object.defineProperty(r,"PathComponent",{enumerable:!0,get:function(){return y.PathComponent}});const m=e("./RegistryItem"),b=e("./RegistryType"),v=e("./lib");var w=e("./lib");Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return w.DataItem}});const k=e("./utils"),T=e("./extended/CryptoMultiAccounts");Object.defineProperty(r,"CryptoMultiAccounts",{enumerable:!0,get:function(){return T.CryptoMultiAccounts}});const I={URRegistryDecoder:f.URRegistryDecoder,Bytes:u.Bytes,CryptoAccount:l.CryptoAccount,CryptoHDKey:s.CryptoHDKey,CryptoMultiAccounts:T.CryptoMultiAccounts,CryptoKeypath:a.CryptoKeypath,CryptoCoinInfo:o.CryptoCoinInfo,CryptoCoinInfoType:o.Type,CryptoCoinInfoNetwork:o.Network,CryptoECKey:c.CryptoECKey,CryptoOutput:d.CryptoOutput,CryptoPSBT:h.CryptoPSBT,MultiKey:p.MultiKey,ScriptExpressions:g.ScriptExpressions,PathComponent:y.PathComponent},_={addReader:v.addReader,addSemanticDecode:v.addSemanticDecode,addSemanticEncode:v.addSemanticEncode,addWriter:v.addWriter,patchTags:k.patchTags},E={RegistryTypes:b.RegistryTypes,RegistryItem:m.RegistryItem,RegistryType:b.RegistryType,decodeToDataItem:v.decodeToDataItem,encodeDataItem:v.encodeDataItem,cbor:_};r.extend=E,(0,n.__exportStar)(e("./errors"),r),(0,n.__exportStar)(e("./Decoder"),r),(0,n.__exportStar)(e("./lib"),r),(0,n.__exportStar)(e("./CryptoAccount"),r),(0,n.__exportStar)(e("./CryptoPSBT"),r),(0,n.__exportStar)(e("./CryptoHDKey"),r),(0,n.__exportStar)(e("./extended/CryptoMultiAccounts"),r),(0,n.__exportStar)(e("./extended/QRHardwareCall"),r),(0,n.__exportStar)(e("./extended/KeyDerivation"),r),(0,n.__exportStar)(e("./extended/DerivationSchema"),r),(0,n.__exportStar)(e("./CryptoOutput"),r),(0,n.__exportStar)(e("./CryptoCoinInfo"),r),(0,n.__exportStar)(e("./CryptoECKey"),r),(0,n.__exportStar)(e("./MultiKey"),r),(0,n.__exportStar)(e("./CryptoKeypath"),r),(0,n.__exportStar)(e("./patchCBOR"),r),(0,n.__exportStar)(e("./PathComponent"),r),(0,n.__exportStar)(e("./RegistryItem"),r),(0,n.__exportStar)(e("./RegistryType"),r),(0,n.__exportStar)(e("./types"),r),(0,n.__exportStar)(e("./utils"),r),r.default=I}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/index.js"}],[644,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DataItem=void 0;r.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/lib/DataItem.js"}],[645,{"./DataItem":644,buffer:3998},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){(function(r){(function(){!function(e,r){"function"==typeof define&&define.amd?define([],r):void 0!==t&&t.exports?t.exports=r():e.CBOR=r()}(this,(function(){const{DataItem:t}=e("./DataItem");var n=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",r=0;r<this.$hex.length;r+=2)t+="%"+this.$hex.substring(r,r+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],r=0;r<this.$hex.length;r+=2)t.push(parseInt(this.$hex.substring(r,r+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var r="",n=0;n<t.length;n++){var i=t.charCodeAt(n).toString(16);1===i.length&&(i="0"+i),r+=i}return new e(r)},e.fromUtf8String=function(t){for(var r=encodeURIComponent(t),n="",i=0;i<r.length;i++)if("%"===r.charAt(i))n+=r.substring(i+1,i+3),i+=2;else{var s=r.charCodeAt(i).toString(16);s.length<2&&(s="0"+s),n+=s}return new e(n)};var n=[],i={},s=function(e){return function(){throw new Error(e+" not implemented")}};function a(){}function o(){}function c(e,t){var r=e.value;return r<24?r:24==r?t.readByte():25==r?t.readUint16():26==r?t.readUint32():27==r?t.readUint64():31==r?null:void s("Additional info: "+r)()}function u(e,t,r){var n=e<<5;t<24?r.writeByte(n|t):t<256?(r.writeByte(24|n),r.writeByte(t)):t<65536?(r.writeByte(25|n),r.writeUint16(t)):t<4294967296?(r.writeByte(26|n),r.writeUint32(t)):(r.writeByte(27|n),r.writeUint64(t))}a.prototype={peekByte:s("peekByte"),readByte:s("readByte"),readChunk:s("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,r=1023&e,n=32768&e;if(31===t)return 0===r?n?-Infinity:Infinity:NaN;var i=t?Math.pow(2,t-25)*(1024+r):Math.pow(2,-24)*r;return n?-i:i},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,r=8388607&e,n=2147483648&e;if(255===t)return 0===r?n?-Infinity:Infinity:NaN;var i=t?Math.pow(2,t-23-127)*(8388608+r):Math.pow(2,-149)*r;return n?-i:i},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,r=4294967296*(1048575&e)+this.readUint32(),n=2147483648&e;if(2047===t)return 0===r?n?-Infinity:Infinity:NaN;var i=t?Math.pow(2,t-52-1023)*(4503599627370496+r):Math.pow(2,-1074)*r;return n?-i:i},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},o.prototype={writeByte:s("writeByte"),result:s("result"),writeFloat16:s("writeFloat16"),writeFloat32:s("writeFloat32"),writeFloat64:s("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:s("writeString"),canWriteBinary:function(e){return!1},writeBinary:s("writeChunk")};var d=new Error;function h(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var r=c(t,e),n=[];if(null!==r){5===t.type&&(r*=2);for(var s=0;s<r;s++)n[s]=h(e)}else for(var a;(a=h(e))!==d;)n.push(a);if(5===t.type){var o={};for(s=0;s<n.length;s+=2)o[n[s]]=n[s+1];return o}return n;case 6:var u=c(t,e),l=i[u];n=h(e);return l?l(n):n;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return d;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function l(e,t){for(var r=0;r<n.length;r++){var i=n[r].fn(e);if(i!==undefined)return u(6,n[r].tag,t),l(i,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,r){r.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(g.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(r=0;r<e.length;r++)l(e[r],t)}else{var s=Object.keys(e);u(5,s.length,t);for(r=0;r<s.length;r++){const n=parseInt(s[r]);isNaN(n)?(l(s[r],t),l(e[s[r]],t)):(l(n,t),l(e[s[r]],t))}}}}var f=[],p=[],g={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?p.push((function(r){if(e===r)return t(r)})):p.push(e)},addReader:function(e,t){"string"==typeof e?f.push((function(r,n){if(e===n)return t(r,n)})):f.push(e)},encode:function(e,t){for(var r=0;r<p.length;r++){var n=(0,p[r])(t);if(n)return l(e,n),n.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var r=0;r<p.length;r++){var n=(0,p[r])(t);if(n)return e.getTag()!==undefined?(l(e,n),n.result()):(l(e.getData(),n),n.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var r=0;r<f.length;r++){var n=(0,f[r])(e,t);if(n)return h(n)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,r){for(var n=0;n<f.length;n++){var i=(0,f[n])(e,r);if(i){const e=h(i);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+r)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return n.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return i[e]=t,this}};function y(e){this.buffer=e,this.pos=0}function m(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function b(e){this.hex=e,this.pos=0}function v(e){this.$hex="",this.finalFormat=e||"hex"}return y.prototype=Object.create(a.prototype),y.prototype.peekByte=function(){return this.buffer[this.pos]},y.prototype.readByte=function(){return this.buffer[this.pos++]},y.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},y.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},y.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},y.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},y.prototype.readChunk=function(e){var t=r.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},m.prototype=Object.create(o.prototype),m.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},m.prototype.writeFloat32=function(e){var t=r.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},m.prototype.writeFloat64=function(e){var t=r.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},m.prototype.writeString=function(e,t){var n=r.from(e,"utf-8");t(n.length),this.writeBuffer(n)},m.prototype.canWriteBinary=function(e){return e instanceof r},m.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},m.prototype.writeBuffer=function(e){if(!(e instanceof r))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=r.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},m.prototype.result=function(){for(var e=r.alloc(this.byteLength),t=0,n=0;n<this.completeBuffers.length;n++){var i=this.completeBuffers[n];i.copy(e,t,0,i.length),t+=i.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof r&&(g.addReader((function(e,t){return r.isBuffer(e)?new y(e):"hex"===t||"base64"===t?new y(r.from(e,t)):void 0})),g.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new m(e):void 0:new m}))),b.prototype=Object.create(a.prototype),b.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},b.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},b.prototype.readChunk=function(t){var n=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof r?r.from(n,"hex"):new e(n)},v.prototype=Object.create(o.prototype),v.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},v.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof r&&t instanceof r},v.prototype.writeBinary=function(t,n){if(t instanceof e)n(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof r&&t instanceof r))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");n(t.length),this.$hex+=t.toString("hex")}},v.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof r?r.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},v.prototype.writeString=function(t,r){var n=e.fromUtf8String(t);r(n.length()),this.$hex+=n.$hex},g.addReader((function(t,r){return t instanceof e||t.$hex?new b(t.$hex):"hex"===r?new b(t):void 0})),g.addWriter((function(e){if("hex"===e)return new v})),g}();return n.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),n}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/lib/cbor-sync.js"}],[646,{"./DataItem":644,"./cbor-sync":645},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.DataItem=r.addWriter=r.addReader=r.addSemanticEncode=r.addSemanticDecode=r.decodeToDataItem=r.encodeDataItem=void 0;var n=e("./cbor-sync");Object.defineProperty(r,"encodeDataItem",{enumerable:!0,get:function(){return n.encodeDataItem}}),Object.defineProperty(r,"decodeToDataItem",{enumerable:!0,get:function(){return n.decodeToDataItem}}),Object.defineProperty(r,"addSemanticDecode",{enumerable:!0,get:function(){return n.addSemanticDecode}}),Object.defineProperty(r,"addSemanticEncode",{enumerable:!0,get:function(){return n.addSemanticEncode}}),Object.defineProperty(r,"addReader",{enumerable:!0,get:function(){return n.addReader}}),Object.defineProperty(r,"addWriter",{enumerable:!0,get:function(){return n.addWriter}});var i=e("./DataItem");Object.defineProperty(r,"DataItem",{enumerable:!0,get:function(){return i.DataItem}})}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/lib/index.js"}],[647,{"./RegistryType":636,"./ScriptExpression":637,"./utils":649},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});const n=e("./utils"),i=e("./RegistryType"),s=e("./ScriptExpression"),a=Object.values(i.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),o=Object.values(s.ScriptExpressions).map((e=>e.getTag()));(0,n.patchTags)(a.concat(o))}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/patchCBOR.js"}],[648,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0})}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/types.js"}],[649,{"./lib":646},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.patchTags=void 0;const n=e("./lib"),i=[];r.patchTags=e=>{e.forEach((e=>{i.find((t=>t===e))||((0,n.addSemanticEncode)(e,(t=>{if(t instanceof n.DataItem&&t.getTag()===e)return t.getData()})),(0,n.addSemanticDecode)(e,(t=>new n.DataItem(t,e))),i.push(e))}))}}}},{package:"@metamask/metamask-airgapped-keyring>@keystonehq/base-eth-keyring>@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry",file:"node_modules/@keystonehq/base-eth-keyring/node_modules/@keystonehq/bc-ur-registry/dist/utils.js"}],[65,{"@metamask/base-controller":1332,loglevel:4787},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getDefaultOnboardingControllerState=r.default=void 0;var n,i=e("@metamask/base-controller"),s=(n=e("loglevel"))&&n.__esModule?n:{default:n};function a(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const o=()=>({seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1});r.getDefaultOnboardingControllerState=o;const c={onboardingTabs:{}},u={seedPhraseBackedUp:{persist:!0,anonymous:!0},firstTimeFlowType:{persist:!0,anonymous:!0},completedOnboarding:{persist:!0,anonymous:!0},onboardingTabs:{persist:!1,anonymous:!1}};class d extends i.BaseController{constructor({messenger:e,state:t}){super({messenger:e,metadata:u,name:"OnboardingController",state:{seedPhraseBackedUp:null,firstTimeFlowType:null,completedOnboarding:!1,...t,...c}}),a(this,"registerOnboarding",(async(e,t)=>{if(this.state.completedOnboarding)return void s.default.debug("Ignoring registerOnboarding; user already onboarded");const{onboardingTabs:r}={...this.state??{}};r&&(r[e]&&r[e]===t||(s.default.debug(`Registering onboarding tab at location '${e}' with tabId '${t}'`),this.update((n=>{n.onboardingTabs={...r,[e]:t}}))))}))}setSeedPhraseBackedUp(e){this.update((t=>{t.seedPhraseBackedUp=e}))}completeOnboarding(){return this.update((e=>{e.completedOnboarding=!0})),!0}setFirstTimeFlowType(e){this.update((t=>{t.firstTimeFlowType=e}))}}r.default=d}}},{package:"$root$",file:"app/scripts/controllers/onboarding.ts"}],[681,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,r){t.exports='"68f08e330f8180377038a7c3623c9dd0"'}}},{package:"@metamask/eth-ledger-bridge-keyring>@ledgerhq/hw-app-eth>@ledgerhq/cryptoassets-evm-signatures",file:"node_modules/@ledgerhq/cryptoassets-evm-signatures/lib/data/eip712-hash.json"}]],[],{});